jQuery(document).ready(function($){"use strict";if("undefined"!=typeof HOMEY_ajax_vars){var single_experience_guests,ajaxurl=HOMEY_ajax_vars.admin_url+"admin-ajax.php",login_redirect_type=HOMEY_ajax_vars.redirect_type,login_redirect=HOMEY_ajax_vars.login_redirect,is_singular_listing=HOMEY_ajax_vars.is_singular_listing,is_singular_experience=HOMEY_ajax_vars.is_singular_experience,paypal_connecting=HOMEY_ajax_vars.paypal_connecting,login_sending=HOMEY_ajax_vars.login_loading,process_loader_spinner=HOMEY_ajax_vars.process_loader_spinner,currency_updating_msg=HOMEY_ajax_vars.currency_updating_msg,homey_date_format=HOMEY_ajax_vars.homey_date_format,userID=HOMEY_ajax_vars.user_id,homey_reCaptcha=HOMEY_ajax_vars.homey_reCaptcha,processing_text=HOMEY_ajax_vars.processing_text,already_login_text=HOMEY_ajax_vars.already_login_text,is_listing_detail=HOMEY_ajax_vars.is_listing_detail,booked_hours_array=HOMEY_ajax_vars.booked_hours_array,pending_hours_array=HOMEY_ajax_vars.pending_hours_array,booking_start_hour=HOMEY_ajax_vars.booking_start_hour,booking_end_hour=HOMEY_ajax_vars.booking_end_hour,homey_min_book_days=HOMEY_ajax_vars.homey_min_book_days;""!==booked_hours_array&&0!==booked_hours_array.length&&(booked_hours_array=JSON.parse(booked_hours_array)),""!==pending_hours_array&&0!==pending_hours_array.length&&(pending_hours_array=JSON.parse(pending_hours_array));var is_tansparent=HOMEY_ajax_vars.homey_tansparent,retina_logo=HOMEY_ajax_vars.retina_logo,retina_logo_splash=HOMEY_ajax_vars.retina_logo_splash,retina_logo_mobile=HOMEY_ajax_vars.retina_logo_mobile,retina_logo_mobile_splash=HOMEY_ajax_vars.retina_logo_mobile_splash,no_more_listings=HOMEY_ajax_vars.no_more_listings,no_more_experiences=HOMEY_ajax_vars.no_more_experiences,allow_additional_guests=HOMEY_ajax_vars.allow_additional_guests,allowed_guests_num=HOMEY_ajax_vars.allowed_guests_num,num_additional_guests=HOMEY_ajax_vars.num_additional_guests,agree_term_text=HOMEY_ajax_vars.agree_term_text,already_booked_text=HOMEY_ajax_vars.already_booked_text,choose_gateway_text=HOMEY_ajax_vars.choose_gateway_text,success_icon=HOMEY_ajax_vars.success_icon,calendar_link=HOMEY_ajax_vars.calendar_link,exp_calendar_link=HOMEY_ajax_vars.exp_calendar_link,focusedInput_2=null,allowed_guests_plus_additional=parseInt(allowed_guests_num)+parseInt(num_additional_guests),compare_url=HOMEY_ajax_vars.compare_url,add_compare=HOMEY_ajax_vars.add_compare,remove_compare=HOMEY_ajax_vars.remove_compare,compare_limit=HOMEY_ajax_vars.compare_limit,homey_booking_type=HOMEY_ajax_vars.homey_booking_type,homey_is_rtl=HOMEY_ajax_vars.homey_is_rtl;homey_is_rtl="yes"==homey_is_rtl;var homey_is_mobile=!1;/Android|webOS|iPhone|iPad|iPod|tablet|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(homey_is_mobile=!0);var homey_window_width=$(window).width(),homey_processing_modal=function(e){var t='<div class="modal fade" id="homey_modal" tabindex="-1" role="dialog" aria-labelledby="homeyModalLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-body homey_messages_modal">'+e+"</div></div></div></div></div>";$("body").append(t),$("#homey_modal").modal()},homey_processing_modal_close=function(){$("#homey_modal").modal("hide")},homey_timeStamp_2=function(e){var t=e.split("-"),a=t[1]+"/"+t[0]+"/"+t[2];return new Date(a).getTime()};2==window.devicePixelRatio&&(is_tansparent?(""!=retina_logo_splash&&$(".transparent-header .homey_logo img").attr("src",retina_logo_splash),""!=retina_logo_mobile_splash&&$(".mobile-logo img").attr("src",retina_logo_mobile_splash)):(""!=retina_logo&&$(".homey_logo img").attr("src",retina_logo),""!=retina_logo_mobile&&$(".mobile-logo img").attr("src",retina_logo_mobile)));var listings_module_section,listings_module_section_taxonomy,experiences_module_section,currencySwitcherList=$("#homey-currency-switcher-list");currencySwitcherList.length>0&&$("#homey-currency-switcher-list > li").on("click",function(e){e.stopPropagation(),currencySwitcherList.slideUp(200);var selectedCurrencyCode=$(this).data("currency-code");selectedCurrencyCode&&($(".homey-selected-currency span").html(selectedCurrencyCode),homey_processing_modal('<i class="'+process_loader_spinner+'"></i> '+currency_updating_msg),$.ajax({url:ajaxurl,dataType:"JSON",method:"POST",data:{action:"homey_currency_converter",currency_to_converter:selectedCurrencyCode},success:function(e){if(e.success){var t=jQuery(document).find("input[name='_wp_http_referer']").val();void 0!==t?-1!==t.indexOf("?")?window.location.href=t+"&n="+new Date().getTime():window.location.href=t+"?n="+new Date().getTime():window.location.reload()}else alert("Check your server settings: "+e.msg),window.location.reload()},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}}))}),$(".homey-currency-switcher").on("change",function(e){var selectedCurrencyCode=$(this).val();selectedCurrencyCode&&(homey_processing_modal('<i class="'+process_loader_spinner+'"></i> '+currency_updating_msg),$.ajax({url:ajaxurl,dataType:"JSON",method:"POST",data:{action:"homey_currency_converter",currency_to_converter:selectedCurrencyCode},success:function(e){e.success?window.location.reload():console.log(e)},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}}))}),$("#listings_module_section").length>0&&$("body").on("click",".homey-loadmore a",function(e){e.preventDefault();var $this=$(this),$wrap=$this.closest("#listings_module_section").find("#module_listings"),limit=$this.data("limit"),paged=$this.data("paged"),style=$this.data("style"),type=$this.data("type"),roomtype=$this.data("roomtype"),country=$this.data("country"),state=$this.data("state"),city=$this.data("city"),area=$this.data("area"),featured=$this.data("featured"),offset=$this.data("offset"),sortby=$this.data("sortby"),booking_type=$this.data("booking_type"),author=$this.data("author"),authorid=$this.data("authorid");$.ajax({type:"POST",url:ajaxurl,data:{action:"homey_loadmore_listings",limit:limit,paged:paged,style:style,type:type,roomtype:roomtype,country:country,state:state,city:city,area:area,featured:featured,sort_by:sortby,offset:offset,booking_type:booking_type,author:author,authorid:authorid},beforeSend:function(){$this.find("i").css("display","inline-block")},success:function(e){if("no_result"==e){$this.closest("#listings_module_section").find(".homey-loadmore").text(no_more_listings);return}$wrap.append(e),$this.data("paged",paged+1);var t=$this.data("paged"),a=$this.data("limit");$this.data("offset",a*(t-1)),homey_init_add_favorite(ajaxurl,userID,is_singular_listing),homey_init_remove_favorite(ajaxurl,userID,is_singular_listing),compare_for_ajax()},complete:function(){$this.find("i").css("display","none")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})}),$("#listings_module_section_taxonomy").length>0&&$("body").on("click",".homey-loadmore a",function(e){e.preventDefault();var $this=$(this),$wrap=$this.closest("#listings_module_section_taxonomy").find("#module_listings_div"),limit=$this.data("limit"),paged=$this.data("paged"),style=$this.data("style"),type=$this.data("type"),roomtype=$this.data("roomtype"),country=$this.data("country"),state=$this.data("state"),city=$this.data("city"),area=$this.data("area"),featured=$this.data("featured"),offset=$this.data("offset"),sortby=$this.data("sortby"),booking_type=$this.data("booking_type"),author=$this.data("author"),authorid=$this.data("authorid");$.ajax({type:"POST",url:ajaxurl,data:{action:"homey_loadmore_listings",limit:limit,paged:paged,style:style,type:type,roomtype:roomtype,country:country,state:state,city:city,area:area,featured:featured,sort_by:sortby,offset:offset,booking_type:booking_type,author:author,authorid:authorid},beforeSend:function(){$this.find("i").css("display","inline-block")},success:function(e){if("no_result"==e){$this.closest("#listings_module_section_taxonomy").find(".homey-loadmore").text(no_more_listings);return}$wrap.append(e),$this.data("paged",paged+1);var t=$this.data("paged"),a=$this.data("limit");$this.data("offset",a*(t-1)),homey_init_add_favorite(ajaxurl,userID,is_singular_listing),homey_init_remove_favorite(ajaxurl,userID,is_singular_listing),compare_for_ajax()},complete:function(){$this.find("i").css("display","none")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})}),$("#experiences_module_section").length>0&&$("body").on("click",".homey-loadmore a",function(e){e.preventDefault();var $this=$(this),$wrap=$this.closest("#experiences_module_section").find("#module_experiences"),limit=$this.data("limit"),paged=$this.data("paged"),style=$this.data("style"),type=$this.data("type"),roomtype=$this.data("roomtype"),country=$this.data("country"),state=$this.data("state"),city=$this.data("city"),area=$this.data("area"),featured=$this.data("featured"),offset=$this.data("offset"),sortby=$this.data("sortby"),booking_type=$this.data("booking_type"),author=$this.data("author"),authorid=$this.data("authorid");$.ajax({type:"POST",url:ajaxurl,data:{action:"homey_loadmore_experiences",limit:limit,paged:paged,style:style,type:type,roomtype:roomtype,country:country,state:state,city:city,area:area,featured:featured,sort_by:sortby,offset:offset,booking_type:booking_type,author:author,authorid:authorid},beforeSend:function(){$this.find("i").css("display","inline-block")},success:function(e){if("no_result"==e){$this.closest("#experiences_module_section").find(".homey-loadmore").text(no_more_experiences);return}$wrap.append(e),$this.data("paged",paged+1);var t=$this.data("paged"),a=$this.data("limit");$this.data("offset",a*(t-1)),homey_init_add_exp_favorite(ajaxurl,userID,is_singular_experience),homey_init_remove_exp_favorite(ajaxurl,userID,is_singular_experience),compare_exp_for_ajax()},complete:function(){$this.find("i").css("display","none")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})}),homey_init_add_favorite(ajaxurl,userID,is_singular_listing),homey_init_remove_favorite(ajaxurl,userID,is_singular_listing),homey_init_add_exp_favorite(ajaxurl,userID,is_singular_experience),homey_init_remove_exp_favorite(ajaxurl,userID,is_singular_experience);var compare_for_ajax=function(){var e=homeyGetCookie("homey_compare_listings");add_to_compare(compare_url,add_compare,remove_compare,compare_limit,e,4),remove_from_compare(e,add_compare,remove_compare)},compare_exp_for_ajax=function(){var e=homeyGetCookie("homey_compare_experiences");add_to_compare_exp(compare_url,add_compare,remove_compare,compare_limit,e,4),remove_from_compare_exp(e,add_compare,remove_compare)};$("#homey_complete_order").on("click",function(e){if(e.preventDefault(),a=$("input[name='homey_payment_type']:checked").val(),n=$("input[name='is_upgrade']").val(),i=$("#listing_id").val(),"paypal"==a)homey_processing_modal(paypal_connecting),homey_paypal_payment(i,n);else if("stripe"==a){var t,a,i,n,t=$(this).parents(".dashboard-area");t.find(".homey_stripe_simple button").trigger("click")}}),$("#homey_complete_order_exp").on("click",function(e){if(e.preventDefault(),a=$("input[name='homey_payment_type']:checked").val(),n=$("input[name='is_upgrade']").val(),i=$("#experience_id").val(),"paypal"==a)homey_processing_modal(paypal_connecting),homey_paypal_exp_payment(i,n);else if("stripe"==a){var t,a,i,n,t=$(this).parents(".dashboard-area");t.find(".homey_stripe_simple button").trigger("click")}});var homey_paypal_payment=function(listing_id,is_upgrade){$.ajax({type:"post",url:ajaxurl,data:{action:"homey_listing_paypal_payment",listing_id:listing_id,is_upgrade:is_upgrade},success:function(e){window.location.href=e},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})},homey_paypal_exp_payment=function(experience_id,is_upgrade){$.ajax({type:"post",url:ajaxurl,data:{action:"homey_experience_paypal_payment",experience_id:experience_id,is_upgrade:is_upgrade},success:function(e){window.location.href=e},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})};$("#add_review").length>0&&$("#add_review").on("click",function(e){e.preventDefault();var $this=$(this),rating=$("#rating").val(),review_action=$("#review_action").val(),review_content=$("#review_content").val(),review_reservation_id=$("#review_reservation_id").val(),security=$("#review-security").val(),parentDIV=$this.parents(".user-dashboard-right");$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_add_review",rating:rating,review_action:review_action,review_content:review_content,review_reservation_id:review_reservation_id,security:security},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class=" '+process_loader_spinner+'"></i>')},success:function(e){parentDIV.find(".alert").remove(),e.success?($this.attr("disabled",!0),window.location.reload()):parentDIV.find(".dashboard-area").prepend('<div class="alert alert-danger alert-dismissible" role="alert"><button type="button" class="close" data-hide="alert" aria-label="Close"><i class="homey-icon homey-icon-close"></i></button>'+e.message+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})}),$("#add_guest_review").length>0&&$("#add_guest_review").on("click",function(e){e.preventDefault();var $this=$(this),rating=$("#rating").val(),review_action=$("#review_guest_action").val(),review_content=$("#review_content").val(),review_guest_reservation_id=$("#review_guest_reservation_id").val(),security=$("#review-security").val(),parentDIV=$this.parents(".user-dashboard-right");$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_add_guest_review",rating:rating,review_action:review_action,review_content:review_content,review_guest_reservation_id:review_guest_reservation_id,security:security},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class=" '+process_loader_spinner+'"></i>')},success:function(e){parentDIV.find(".alert").remove(),e.success?($this.attr("disabled",!0),window.location.reload()):parentDIV.find(".dashboard-area").prepend('<div class="alert alert-danger alert-dismissible" role="alert"><button type="button" class="close" data-hide="alert" aria-label="Close"><i class="homey-icon homey-icon-close"></i></button>'+e.message+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})});var listing_review_ajax=function(sortby,listing_id,paged){var review_container=$("#homey_reviews");$.ajax({type:"post",url:ajaxurl,data:{action:"homey_ajax_review",sortby:sortby,listing_id:listing_id,paged:paged},beforeSend:function(){},success:function(e){review_container.empty(),review_container.html(e)},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){}})};$("#sort_review").length>0&&$("#sort_review").on("change",function(){var e=$(this).val(),t=$("#review_listing_id").val(),a=$("#review_paged").val();listing_review_ajax(e,t,a)}),$("#review_next").length>0&&$("#review_next").on("click",function(e){e.preventDefault(),$("#review_prev").removeAttr("disabled");var t=$("#page_sort").val(),a=$("#total_pages").val(),i=$("#review_listing_id").val(),n=$("#review_paged").val();n=Number(n)+1,$("#review_paged").val(n),n==a&&$(this).attr("disabled",!0),listing_review_ajax(t,i,n)}),$("#review_prev").length>0&&$("#review_prev").on("click",function(e){e.preventDefault(),$("#review_next").removeAttr("disabled");var t=$("#page_sort").val(),a=$("#review_listing_id").val(),i=$("#review_paged").val();i=Number(i)-1,$("#review_paged").val(i),i<=1&&$(this).attr("disabled",!0),listing_review_ajax(t,a,i)}),$("#add_exp_review").length>0&&$("#add_exp_review").on("click",function(e){e.preventDefault();var $this=$(this),rating=$("#rating").val(),review_action=$("#review_action").val(),review_content=$("#review_content").val(),review_reservation_id=$("#review_reservation_id").val(),security=$("#review-security").val(),parentDIV=$this.parents(".user-dashboard-right");$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_add_exp_review",rating:rating,review_action:review_action,review_content:review_content,review_reservation_id:review_reservation_id,security:security},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class=" '+process_loader_spinner+'"></i>')},success:function(e){parentDIV.find(".alert").remove(),e.success?($this.attr("disabled",!0),window.location.reload()):parentDIV.find(".dashboard-area").prepend('<div class="alert alert-danger alert-dismissible" role="alert"><button type="button" class="close" data-hide="alert" aria-label="Close"><i class="homey-icon homey-icon-close"></i></button>'+e.message+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})}),$("#add_guest_exp_review").length>0&&$("#add_guest_exp_review").on("click",function(e){e.preventDefault();var $this=$(this),rating=$("#rating").val(),review_action=$("#review_guest_action").val(),review_content=$("#review_content").val(),review_guest_reservation_id=$("#review_guest_reservation_id").val(),security=$("#review-security").val(),parentDIV=$this.parents(".user-dashboard-right");$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_add_guest_exp_review",rating:rating,review_action:review_action,review_content:review_content,review_guest_reservation_id:review_guest_reservation_id,security:security},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class=" '+process_loader_spinner+'"></i>')},success:function(e){parentDIV.find(".alert").remove(),e.success?($this.attr("disabled",!0),window.location.reload()):parentDIV.find(".dashboard-area").prepend('<div class="alert alert-danger alert-dismissible" role="alert"><button type="button" class="close" data-hide="alert" aria-label="Close"><i class="homey-icon homey-icon-close"></i></button>'+e.message+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})});var experience_review_ajax=function(sortby,experience_id,paged){var review_container=$("#homey_reviews");$.ajax({type:"post",url:ajaxurl,data:{action:"homey_ajax_exp_review",sortby:sortby,experience_id:experience_id,paged:paged},beforeSend:function(){},success:function(e){review_container.empty(),review_container.html(e)},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){}})};$("#sort_exp_review").length>0&&$("#sort_exp_review").on("change",function(){var e=$(this).val(),t=$("#review_experience_id").val(),a=$("#review_paged").val();experience_review_ajax(e,t,a)}),$("#review_exp_next").length>0&&$("#review_exp_next").on("click",function(e){e.preventDefault(),$("#review_prev").removeAttr("disabled");var t=$("#page_sort").val(),a=$("#total_pages").val();$("#review_experience_id").val();var i=$("#review_paged").val();i=Number(i)+1,$("#review_paged").val(i),i==a&&$(this).attr("disabled",!0),experience_review_ajax(t,listing_id,i)}),$("#review_exp_prev").length>0&&$("#review_exp_prev").on("click",function(e){e.preventDefault(),$("#review_next").removeAttr("disabled");var t=$("#page_sort").val(),a=$("#review_experience_id").val(),i=$("#review_paged").val();i=Number(i)-1,$("#review_paged").val(i),i<=1&&$(this).attr("disabled",!0),experience_review_ajax(t,a,i)});var homey_convert_date=function(e){if(""==e)return"";var t="",a="",a=moment(e,(t=homey_date_format.toUpperCase()).replace("YY","YYYY")).format("YYYY-MM-DD");return a},homey_calculate_booking_cost=function(check_in_date,check_out_date,guests,listing_id,security,extra_options,adult_guest,child_guest){var $this=$(this),notify=$(".homey_notification");if(notify.find(".notify").remove(),""===check_in_date||""===check_out_date){$("#homey_booking_cost, .payment-list").empty();return}$.ajax({type:"post",url:ajaxurl,data:{action:"homey_calculate_booking_cost",check_in_date:check_in_date,check_out_date:check_out_date,guests:guests,adult_guest:adult_guest,child_guest:child_guest,extra_options:extra_options,listing_id:listing_id,security:security},beforeSend:function(){$("#homey_booking_cost, .payment-list").empty(),$this.children("i").remove(),$this.prepend('<i class=" '+process_loader_spinner+'"></i>'),notify.find(".homey_preloader").show()},success:function(e){$("#homey_booking_cost, .payment-list").empty().html(e)},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner),notify.find(".homey_preloader").hide()}})},homey_calculate_exp_booking_cost=function(check_in_date,guests,experience_id,security,extra_options){var $this=$(this),notify=$(".homey_notification");if(notify.find(".notify").remove(),""===check_in_date){$("#homey_booking_cost, .payment-list").empty();return}$.ajax({type:"post",url:ajaxurl,data:{action:"homey_calculate_exp_booking_cost",check_in_date:check_in_date,guests:guests,extra_options:extra_options,experience_id:experience_id,security:security},beforeSend:function(){$("#homey_booking_cost, .payment-list").empty(),$this.children("i").remove(),$this.prepend('<i class=" '+process_loader_spinner+'"></i>'),notify.find(".homey_preloader").show()},success:function(e){$("#homey_booking_cost, .payment-list").empty().html(e)},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner),notify.find(".homey_preloader").hide()}})},homey_calculate_hourly_booking_cost=function(check_in_date,start_hour,end_hour,guests,listing_id,security,extra_options){var $this=$(this),notify=$(".homey_notification");if(notify.find(".notify").remove(),""===check_in_date||""===start_hour||""===end_hour){$("#homey_booking_cost, .payment-list").empty();return}$.ajax({type:"post",url:ajaxurl,data:{action:"homey_calculate_hourly_booking_cost",check_in_date:check_in_date,start_hour:start_hour,end_hour:end_hour,guests:guests,extra_options:extra_options,listing_id:listing_id,security:security},beforeSend:function(){$("#homey_booking_cost, .payment-list").empty(),$this.children("i").remove(),$this.prepend('<i class=" '+process_loader_spinner+'"></i>'),notify.find(".homey_preloader").show()},success:function(e){$("#homey_booking_cost, .payment-list").empty().html(e)},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner),notify.find(".homey_preloader").hide()}})},check_booking_availability_on_date_change=function(check_in_date,check_out_date,listing_id,security){var $this=$(this),notify=$(".homey_notification");notify.find(".notify").remove(),$(".homey_extra_price input").each(function(){$(this).prop("checked",!1)}),$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"check_booking_availability_on_date_change",check_in_date:check_in_date,check_out_date:check_out_date,listing_id:listing_id,security:security},beforeSend:function(){$("#homey_booking_cost, .payment-list").empty(),notify.find(".homey_preloader").show()},success:function(e){e.success?($("#request_for_reservation, #request_for_reservation_mobile").removeAttr("disabled"),$("#instance_reservation, #instance_reservation_mobile").removeAttr("disabled"),notify.prepend('<div class="notify text-success text-center btn-success-outlined btn btn-full-width">'+e.message+"</div>")):(notify.prepend('<div class="notify text-danger text-center btn-danger-outlined btn btn-full-width">'+e.message+"</div>"),$("#request_for_reservation, #request_for_reservation_mobile").attr("disabled",!0),$("#instance_reservation, #instance_reservation_mobile").attr("disabled",!0))},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){notify.find(".homey_preloader").hide()}})},check_exp_availability_on_date_change=function(check_in_date,experience_id,security){var $this=$(this),exp_guests=$("input[name='exp_guests']").val(),notify=$(".homey_notification");notify.find(".notify").remove(),$(".homey_exp_extra_price input").each(function(){$(this).prop("checked",!1)}),$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"check_exp_availability_on_date_change",check_in_date:check_in_date,experience_id:experience_id,exp_guests:exp_guests,security:security},beforeSend:function(){$("#homey_booking_cost, .payment-list").empty(),notify.find(".homey_preloader").show()},success:function(e){e.success?($("#request_for_reservation, #request_for_reservation_mobile").removeAttr("disabled"),$("#instance_reservation, #instance_reservation_mobile").removeAttr("disabled"),notify.prepend('<div class="notify text-success text-center btn-success-outlined btn btn-full-width">'+e.message+"</div>")):(notify.prepend('<div class="notify text-danger text-center btn-danger-outlined btn btn-full-width">'+e.message+"</div>"),$("#request_for_reservation, #request_for_reservation_mobile").attr("disabled",!0),$("#instance_reservation, #instance_reservation_mobile").attr("disabled",!0))},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){notify.find(".homey_preloader").hide()}})},check_booking_availability_on_hour_change=function(check_in_date,start_hour,end_hour,listing_id,security){var $this=$(this),notify=$(".homey_notification");notify.find(".notify").remove(),$(".homey_extra_price input").each(function(){$(this).prop("checked",!1)});var visitortimezone_gmt=$("#visitortimezone").val(),prettyDateTime=$("#prettyDateTime").val();$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"check_booking_availability_on_hour_change",check_in_date:check_in_date,start_hour:start_hour,end_hour:end_hour,listing_id:listing_id,security:security,visitortimezone_gmt:visitortimezone_gmt,prettyDateTime:prettyDateTime},beforeSend:function(){$("#homey_booking_cost, .payment-list").empty(),notify.find(".homey_preloader").show()},success:function(e){e.success?($("#request_hourly_reservation, #request_hourly_reservation_mobile").removeAttr("disabled"),$("#instance_hourly_reservation, #instance_hourly_reservation_mobile").removeAttr("disabled"),notify.prepend('<div class="notify text-success text-center btn-success-outlined btn btn-full-width">'+e.message+"</div>")):(notify.prepend('<div class="notify text-danger text-center btn-danger-outlined btn btn-full-width">'+e.message+"</div>"),$("#request_hourly_reservation, #request_hourly_reservation_mobile").attr("disabled",!0),$("#instance_hourly_reservation, #instance_hourly_reservation_mobile").attr("disabled",!0))},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){notify.find(".homey_preloader").hide()}})};$("#single-listing-date-range input").on("focus",function(){$(".single-listing-booking-calendar-js").css("display","block"),$(".single-listing-booking-calendar-js").addClass("arrive_active"),$(".single-form-guests-js").css("display","none"),focusedInput_2=$(this).attr("name"),$(".single-listing-booking-calendar-js").removeClass("arrive_active depart_active").addClass(focusedInput_2+"_active")}),$(".single-guests-js input").on("focus",function(){$(this).prev("label").css("display","block"),$(this).addClass("on-focus"),$(".single-form-guests-js").css("display","block")}),$(".exp-single-guests-js input").on("focus",function(){$(this).prev("label").css("display","block"),$(this).addClass("on-focus"),$(".exp-single-form-guests-js").css("display","block")});var fromTimestamp_2,numClicks=0,toTimestamp_2=0,homey_booking_dates=function(){$(".single-listing-booking-calendar-js ul li").on("click",function(){console.log(" ln 1139");var e=$(this);if(e.show(),(e.hasClass("past-day")||e.hasClass("homey-not-available-for-booking"))&&!e.hasClass("reservation_start"))return!1;numClicks+=1;var t=e.data("formatted-date"),a=e.data("timestamp");if("depart"==focusedInput_2&&a>fromTimestamp_2&&($(".single-listing-calendar-wrap ul").find("li.to-day").removeClass("selected").siblings().removeClass("to-day in-between"),numClicks=2),1==numClicks)fromTimestamp_2=a,$(".single-listing-calendar-wrap ul li").removeClass("to-day from-day selected in-between"),e.addClass("from-day selected"),$(".single-listing-booking-calendar-js").removeClass("arrive_active").addClass("depart_active"),$('input[name="arrive"]').val(t),$('input[name="depart"]').val(""),"per_hour"!=homey_booking_type&&homey_calculate_price_checkin();else if(2==numClicks){toTimestamp_2=a,e.addClass("to-day selected"),$(".single-listing-booking-calendar-js").removeClass("depart_active").addClass("arrive_active");var i=$('input[name="arrive"]').val();i=homey_timeStamp_2(i);var n=homey_timeStamp_2(t);i>=n&&"per_day_date"!=homey_booking_type?(fromTimestamp_2=a,toTimestamp_2=0,$(".single-listing-calendar-wrap ul li").removeClass("to-day from-day selected in-between"),e.addClass("from-day selected"),$(".single-listing-booking-calendar-js").removeClass("arrive_active").addClass("depart_active"),$('input[name="arrive"]').val(t),numClicks=1):(setInBetween_2(fromTimestamp_2,toTimestamp_2),$('input[name="depart"]').val(t),$("#single-booking-search-calendar, #single-overlay-booking-search-calendar").hide(),"per_hour"!=homey_booking_type&&homey_calculate_price_checkout())}2==numClicks&&(numClicks=0)})};if("per_hour"!=homey_booking_type){homey_booking_dates(),$(".single-listing-calendar-wrap ul li").on("hover",function(){var e=$(this).data("timestamp");1==numClicks&&setInBetween_2(fromTimestamp_2,e)});var setInBetween_2=function(e,t){$(".single-listing-calendar-wrap ul li").removeClass("in-between").filter(function(){var a=$(this).data("timestamp");return a>e&&a<t}).addClass("in-between")},homey_calculate_price_checkin=function(){var e=$('input[name="arrive"]').val();e=homey_convert_date(e);var t=$('input[name="depart"]').val();t=homey_convert_date(t);var a=$('input[name="guests"]').val(),i=$('input[name="adult_guest"]').val(),n=$('input[name="child_guest"]').val(),o=$("#listing_id").val(),s=$("#reservation-security").val();homey_calculate_booking_cost(e,t,a,o,s,i,n)};"yes"==is_singular_listing&&homey_calculate_price_checkin();var homey_calculate_price_checkout=function(){var e=$('input[name="arrive"]').val();e=homey_convert_date(e);var t=$('input[name="depart"]').val();t=homey_convert_date(t);var a=$('input[name="guests"]').val(),i=$('input[name="adult_guest"]').val(),n=$('input[name="child_guest"]').val(),o=$("#listing_id").val(),s=$("#reservation-security").val();homey_calculate_booking_cost(e,t,a,o,s,i,n),check_booking_availability_on_date_change(e,t,o,s)};$(".apply_guests").on("click",function(){var e=$('input[name="arrive"]').val();e=homey_convert_date(e);var t=$('input[name="depart"]').val();t=homey_convert_date(t);var a=$('input[name="guests"]').val(),i=$('input[name="adult_guest"]').val(),n=$('input[name="child_guest"]').val(),o=$("#listing_id").val(),s=$("#reservation-security").val();homey_calculate_booking_cost(e,t,a,o,s,i,n),check_booking_availability_on_date_change(e,t,o,s)}),$(".homey_extra_price input").on("click",function(){var e,t=[];$(".homey_extra_price input").each(function(){if($(this).is(":checked")){var a=$(this).data("name"),i=$(this).data("price"),n=$(this).data("type");e="",e=(e=(e=a)+"|"+i)+"|"+n,t.push(e)}});var a=$('input[name="arrive"]').val();a=homey_convert_date(a);var i=$('input[name="depart"]').val();i=homey_convert_date(i);var n=$('input[name="guests"]').val(),o=$('input[name="adult_guest"]').val(),s=$('input[name="child_guest"]').val(),r=$("#listing_id").val(),l=$("#reservation-security").val();homey_calculate_booking_cost(a,i,n,r,l,t,o,s)})}"per_hour"==homey_booking_type&&($(".hourly-js-desktop ul li").on("click",function(){var e=$(this),t=e.data("formatted-date");$('input[name="arrive"]').val(t),$(".single-listing-hourly-calendar-wrap ul li").removeClass("selected"),e.addClass("selected"),$("#single-booking-search-calendar, #single-overlay-booking-search-calendar").hide();var a=$('input[name="arrive"]').val();a=homey_convert_date(a);var i=$('select[name="start_hour"]').val(),n=$('select[name="end_hour"]').val(),o=$('input[name="guests"]').val(),s=$("#listing_id").val(),r=$("#reservation-security").val();homey_calculate_hourly_booking_cost(a,i,n,o,s,r),""!==a&&""!==i&&""!==n&&check_booking_availability_on_hour_change(a,i,n,s,r)}),$("#start_hour").on("change",function(){var e=$('input[name="arrive"]').val();e=homey_convert_date(e);var t=$('select[name="start_hour"]').val(),a=$('select[name="end_hour"]').val(),i=$('input[name="guests"]').val(),n=$("#listing_id").val(),o=$("#reservation-security").val();homey_calculate_hourly_booking_cost(e,t,a,i,n,o),""!==e&&""!==t&&""!==a&&check_booking_availability_on_hour_change(e,t,a,n,o)}),$("#end_hour").on("change",function(){var e=$('input[name="arrive"]').val();e=homey_convert_date(e);var t=$('select[name="start_hour"]').val(),a=$('select[name="end_hour"]').val(),i=$('input[name="guests"]').val(),n=$("#listing_id").val(),o=$("#reservation-security").val();homey_calculate_hourly_booking_cost(e,t,a,i,n,o),check_booking_availability_on_hour_change(e,t,a,n,o)}),$(".hourly-js-mobile ul li").on("click",function(){var e=$(this),t=e.data("formatted-date");$('input[name="arrive"]').val(t),$(".single-listing-hourly-calendar-wrap ul li").removeClass("selected"),e.addClass("selected"),$("#single-booking-search-calendar, #single-overlay-booking-search-calendar").hide();var a=$('input[name="arrive"]').val();a=homey_convert_date(a);var i=$("#start_hour_overlay").val(),n=$("#end_hour_overlay").val(),o=$('input[name="guests"]').val(),s=$("#listing_id").val(),r=$("#reservation-security").val();homey_calculate_hourly_booking_cost(a,i,n,o,s,r),""!==a&&""!==i&&""!==n&&check_booking_availability_on_hour_change(a,i,n,s,r)}),$("#start_hour_overlay").on("change",function(){var e=$('input[name="arrive"]').val();e=homey_convert_date(e);var t=$("#start_hour_overlay").val(),a=$("#end_hour_overlay").val(),i=$('input[name="guests"]').val(),n=$("#listing_id").val(),o=$("#reservation-security").val();homey_calculate_hourly_booking_cost(e,t,a,i,n,o),""!==e&&""!==t&&""!==a&&check_booking_availability_on_hour_change(e,t,a,n,o)}),$("#end_hour_overlay").on("change",function(){var e=$('input[name="arrive"]').val();e=homey_convert_date(e);var t=$("#start_hour_overlay").val(),a=$("#end_hour_overlay").val(),i=$('input[name="guests"]').val(),n=$("#listing_id").val(),o=$("#reservation-security").val();homey_calculate_hourly_booking_cost(e,t,a,i,n,o),check_booking_availability_on_hour_change(e,t,a,n,o)}),$(".apply_guests").on("click",function(){var e=$('input[name="arrive"]').val();e=homey_convert_date(e);var t=$('select[name="start_hour"]').val(),a=$('select[name="end_hour"]').val(),i=$('input[name="guests"]').val(),n=$("#listing_id").val(),o=$("#reservation-security").val();homey_calculate_hourly_booking_cost(e,t,a,i,n,o),check_booking_availability_on_hour_change(e,t,a,n,o)}),$("#apply_guests_hourly").on("click",function(){var e=$('input[name="arrive"]').val();e=homey_convert_date(e);var t=$("#start_hour_overlay").val(),a=$("#end_hour_overlay").val(),i=$('input[name="guests"]').val(),n=$("#listing_id").val(),o=$("#reservation-security").val();homey_calculate_hourly_booking_cost(e,t,a,i,n,o),check_booking_availability_on_hour_change(e,t,a,n,o)}),$(".homey_extra_price input").on("click",function(){var e,t=[],a=$(".homey_extra_price input");if($("#overlay-booking-module").hasClass("open")&&(a=$("#overlay-booking-module").find(".homey_extra_price input")),$(a).each(function(){if($(this).is(":checked")){var a=$(this).data("name"),i=$(this).data("price"),n=$(this).data("type");e="",e=(e=(e=a)+"|"+i)+"|"+n,t.push(e)}}),$("#overlay-booking-module").hasClass("open"))var i=$("#overlay-booking-module").find('input[name="arrive"]').val(),n=$("#overlay-booking-module").find('select[name="start_hour"]').val(),o=$("#overlay-booking-module").find('select[name="end_hour"]').val(),s=$("#overlay-booking-module").find('input[name="guests"]').val(),r=$("#overlay-booking-module").find("#listing_id").val(),l=$("#overlay-booking-module").find("#reservation-security").val();else var i=$('input[name="arrive"]').val(),n=$('select[name="start_hour"]').val(),o=$('select[name="end_hour"]').val(),s=$('input[name="guests"]').val(),r=$("#listing_id").val(),l=$("#reservation-security").val();i=homey_convert_date(i),homey_calculate_hourly_booking_cost(i,n,o,s,r,l,t)})),$(".adult_plus").on("click",function(e){e.preventDefault(),parseInt($('input[name="guests"]').val());var t=parseInt($('input[name="adult_guest"]').val()),a=parseInt($('input[name="child_guest"]').val());t++,$(".homey_adult").text(t),$('input[name="adult_guest"]').val(t);var i=t+a;"yes"!=allow_additional_guests&&i>=allowed_guests_num?($(".adult_plus").attr("disabled",!0),$(".child_plus").attr("disabled",!0),$('input[name="guests"]').val(allowed_guests_num)):"yes"==allow_additional_guests&&i>=allowed_guests_plus_additional&&""!==num_additional_guests&&($(".adult_plus").attr("disabled",!0),$(".child_plus").attr("disabled",!0),$('input[name="guests"]').val(allowed_guests_num)),$('input[name="guests"]').val(i)}),$(".adult_minus").on("click",function(e){e.preventDefault(),parseInt($('input[name="guests"]').val());var t=parseInt($('input[name="adult_guest"]').val()),a=parseInt($('input[name="child_guest"]').val());if(0!=t){t--,$(".homey_adult").text(t),$('input[name="adult_guest"]').val(t);var i=t+a;$('input[name="guests"]').val(i),$(".adult_plus").removeAttr("disabled"),$(".child_plus").removeAttr("disabled")}}),$(".child_plus").on("click",function(e){e.preventDefault(),parseInt($('input[name="guests"]').val());var t=parseInt($('input[name="child_guest"]').val()),a=parseInt($('input[name="adult_guest"]').val());t++,$(".homey_child").text(t),$('input[name="child_guest"]').val(t);var i=t+a;"yes"!=allow_additional_guests&&i==allowed_guests_num?($(".adult_plus").attr("disabled",!0),$(".child_plus").attr("disabled",!0)):"yes"==allow_additional_guests&&i==allowed_guests_plus_additional&&""!==num_additional_guests&&($(".adult_plus").attr("disabled",!0),$(".child_plus").attr("disabled",!0)),$('input[name="guests"]').val(i)}),$(".child_minus").on("click",function(e){e.preventDefault(),parseInt($('input[name="guests"]').val());var t=parseInt($('input[name="child_guest"]').val()),a=parseInt($('input[name="adult_guest"]').val());if(0!=t){t--,$(".homey_child").text(t),$('input[name="child_guest"]').val(t);var i=t+a;$('input[name="guests"]').val(i),$(".adult_plus").removeAttr("disabled"),$(".child_plus").removeAttr("disabled")}});var experience_id=$("#experience_id").val();if(is_singular_experience){$("#single-experience-date-range input").on("focus",function(){var e=$("#single-experience-date-range").find(".single-experience-booking-calendar-js"),t=$("#single-experience-date-range").find(".single-experience-main-calendar-js");void 0!==e&&(console.log("withinnnn..."),$(e).css("display","block"),$(e).addClass("arrive_active"),$(".single-form-guests-js").css("display","none"),focusedInput_2=$(this).attr("name"),$(e).removeClass("arrive_active depart_active").addClass(focusedInput_2+"_active")),void 0!==t&&(console.log("not withinnnn..."),$(t).css("display","block"),$(t).addClass("arrive_active"),$(".single-form-guests-js").css("display","none"),focusedInput_2=$(this).attr("name"),$(t).removeClass("arrive_active depart_active").addClass(focusedInput_2+"_active"))}),$("#mob-single-experience-date-range input").on("focus",function(){var e=$("#mob-single-experience-date-range").find(".single-experience-booking-calendar-js"),t=$("#mob-single-experience-date-range").find(".single-experience-main-calendar-js");void 0!==e&&($(e).css("display","block"),$(e).addClass("arrive_active"),$(".single-form-guests-js").css("display","none"),focusedInput_2=$(this).attr("name"),$(e).removeClass("arrive_active depart_active").addClass(focusedInput_2+"_active")),void 0!==t&&($(t).css("display","block"),$(t).addClass("arrive_active"),$(".single-form-guests-js").css("display","none"),focusedInput_2=$(this).attr("name"),$(t).removeClass("arrive_active depart_active").addClass(focusedInput_2+"_active"))}),$(".single-guests-js input").on("focus",function(){$(this).prev("label").css("display","block"),$(this).addClass("on-focus"),$(".single-form-guests-js").css("display","block")});var fromTimestamp_2,numClicks=0,toTimestamp_2=0,homey_calculate_exp_price_checkout=function(){var e,t=[];$(".homey_exp_extra_price input").each(function(){if($(this).is(":checked")){var a=$(this).data("name"),i=$(this).data("price"),n=$(this).data("type");e="",e=(e=(e=a)+"|"+i)+"|"+n,t.push(e)}});var a=$('input[name="arrive"]').val();a=homey_convert_date(a);var i=$('input[name="exp_guests"]').val(),n=$("#experience_id").val(),o=$("#reservation-security").val();homey_calculate_exp_booking_cost(a,i,n,o,t),check_exp_availability_on_date_change(a,n,o)};$(".single-experience-booking-calendar-js ul li").on("click",function(){var e=$(this);if(e.show(),(e.hasClass("past-day")||e.hasClass("homey-not-available-for-booking"))&&!e.hasClass("reservation_start"))return!1;numClicks=2;var t=e.data("formatted-date"),a=e.data("timestamp"),i=e.data("availableSlotsInfo");console.log(" oooo "+i),$("#available_slots_by_date_text").text(""),$("#available_slots_by_date_text").text(i),toTimestamp_2=a,e.addClass("to-day selected"),$(".single-experience-booking-calendar-js").removeClass("depart_active").addClass("arrive_active");var n=$('input[name="arrive"]').val();n=homey_timeStamp_2(n),$('input[name="arrive"]').val(t);var o=$('input[name="exp_guests"]').val();$("#single-booking-search-calendar, #single-overlay-booking-search-calendar").hide(),o>0&&homey_calculate_exp_price_checkout()}),$(".apply_exp_guests").on("click",function(){var e,t=[];$(".homey_exp_extra_price input").each(function(){if($(this).is(":checked")){var a=$(this).data("name"),i=$(this).data("price"),n=$(this).data("type");e="",e=(e=(e=a)+"|"+i)+"|"+n,t.push(e)}});var a=$('input[name="arrive"]').val();a=homey_convert_date(a);var i=$('input[name="depart"]').val();i=homey_convert_date(i);var n=$('input[name="exp_guests"]').val(),o=$("#experience_id").val(),s=$("#reservation-security").val();homey_calculate_exp_booking_cost(a,n,o,s,t),check_exp_availability_on_date_change(a,o,s,t)}),$(".homey_exp_extra_price input").on("click",function(){var e,t=[];$(".homey_extra_price input").each(function(){if($(this).is(":checked")){var a=$(this).data("name"),i=$(this).data("price"),n=$(this).data("type");e="",e=(e=(e=a)+"|"+i)+"|"+n,t.push(e)}});var a=$('input[name="arrive"]').val();a=homey_convert_date(a);var i=$('input[name="depart"]').val();i=homey_convert_date(i);var n=$('input[name="exp_guests"]').val(),o=$("#experience_id").val(),s=$("#reservation-security").val();homey_calculate_booking_cost(a,i,n,o,s,t)})}$(".exp_adult_plus").on("click",function(e){e.preventDefault(),parseInt($('input[name="exp_guests"]').val());var t=parseInt($('input[name="exp_adult_guest"]').val()),a=parseInt($('input[name="exp_child_guest"]').val());t++,$(".exp_homey_adult").text(t),$('input[name="exp_adult_guest"]').val(t);var i=t+a;"yes"!=allow_additional_guests&&i==allowed_guests_num?($(".exp_adult_plus").attr("disabled",!0),$(".exp_child_plus").attr("disabled",!0)):"yes"==allow_additional_guests&&i==allowed_guests_plus_additional&&""!==num_additional_guests&&($(".exp_adult_plus").attr("disabled",!0),$(".exp_child_plus").attr("disabled",!0)),$('input[name="exp_guests"]').val(i)}),$(".exp_adult_minus").on("click",function(e){e.preventDefault(),parseInt($('input[name="exp_guests"]').val());var t=parseInt($('input[name="exp_adult_guest"]').val()),a=parseInt($('input[name="exp_child_guest"]').val());if(0!=t){t--,$(".exp_homey_adult").text(t),$('input[name="exp_adult_guest"]').val(t);var i=t+a;$('input[name="exp_guests"]').val(i),$(".exp_adult_plus").removeAttr("disabled"),$(".exp_child_plus").removeAttr("disabled")}}),$(".exp_child_plus").on("click",function(e){e.preventDefault(),parseInt($('input[name="exp_guests"]').val());var t=parseInt($('input[name="exp_child_guest"]').val()),a=parseInt($('input[name="exp_adult_guest"]').val());t++,$(".exp_homey_child").text(t),$('input[name="exp_child_guest"]').val(t);var i=t+a;"yes"!=allow_additional_guests&&i==allowed_guests_num?($(".exp_adult_plus").attr("disabled",!0),$(".exp_child_plus").attr("disabled",!0)):"yes"==allow_additional_guests&&i==allowed_guests_plus_additional&&""!==num_additional_guests&&($(".exp_adult_plus").attr("disabled",!0),$(".exp_child_plus").attr("disabled",!0)),$('input[name="exp_guests"]').val(i)}),$(".exp_child_minus").on("click",function(e){e.preventDefault(),parseInt($('input[name="exp_guests"]').val());var t=parseInt($('input[name="exp_child_guest"]').val()),a=parseInt($('input[name="exp_adult_guest"]').val());if(0!=t){t--,$(".exp_homey_child").text(t),$('input[name="exp_child_guest"]').val(t);var i=t+a;$('input[name="exp_guests"]').val(i),$(".exp_adult_plus").removeAttr("disabled"),$(".exp_child_plus").removeAttr("disabled")}}),$("#request_for_reservation, #request_for_reservation_mobile").on("click",function(e){e.preventDefault();var temp_opt,$this=$(this),extra_options=[],check_in_date=$('input[name="arrive"]').val();check_in_date=homey_convert_date(check_in_date);var check_out_date=$('input[name="depart"]').val();check_out_date=homey_convert_date(check_out_date);var guest_message=$('textarea[name="guest_message"]').val();""==guest_message&&(guest_message=$("#overlay-booking-module").find('textarea[name="guest_message"]').val());var guests=$('input[name="guests"]').val(),adult_guest=$('input[name="adult_guest"]').val(),child_guest=$('input[name="child_guest"]').val(),listing_id=$("#listing_id").val(),new_reser_request_user_email=$("#new_reser_request_user_email").val();""==new_reser_request_user_email&&(new_reser_request_user_email=$("#overlay-booking-module").find("#new_reser_request_user_email").val());var security=$("#reservation-security").val(),notify=$this.parents(".homey_notification");notify.find(".notify").remove(),save_booking_details($('input[name="arrive"]').val(),$('input[name="depart"]').val(),guests,guest_message,adult_guest,child_guest,new_reser_request_user_email),$(".homey_extra_price input").each(function(){if($(this).is(":checked")){var e=$(this).data("name"),t=$(this).data("price"),a=$(this).data("type");temp_opt="",temp_opt=(temp_opt=(temp_opt=e)+"|"+t)+"|"+a,extra_options.push(temp_opt)}});var action_name_for_wp_action="homey_add_reservation";new_reser_request_user_email&&""!==new_reser_request_user_email.trim()&&(action_name_for_wp_action="hm_no_login_add_reservation"),$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:action_name_for_wp_action,check_in_date:check_in_date,check_out_date:check_out_date,guests:guests,adult_guest:adult_guest,child_guest:child_guest,listing_id:listing_id,extra_options:extra_options,guest_message:guest_message,new_reser_request_user_email:new_reser_request_user_email,security:security},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class=" '+process_loader_spinner+'"></i>')},success:function(e){e.success?($(".check_in_date, .check_out_date").val(""),notify.prepend('<div class="notify text-success text-center btn-success-outlined btn btn-full-width">'+e.message+"</div>")):($(".account-loggedin").length<1&&jQuery("#modal-login").modal("show"),notify.prepend('<div class="notify text-danger text-center btn-danger-outlined btn btn-full-width">'+e.message+"</div>"))},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})}),$("#request_for_exp_reservation, #request_for_exp_reservation_mobile").on("click",function(e){e.preventDefault();var temp_opt,$this=$(this),extra_options=[],check_in_date=$('input[name="arrive"]').val();check_in_date=homey_convert_date(check_in_date);var guest_message=$('textarea[name="exp_guest_message"]').val(),guests=$('input[name="exp_guests"]').val(),adult_guest=$('input[name="exp_adult_guest"]').val(),child_guest=$('input[name="exp_child_guest"]').val(),experience_id=$("#experience_id").val(),new_reser_exp_request_user_email=$("#new_reser_exp_request_user_email").val();console.log(new_reser_exp_request_user_email+" first try data --> "),(void 0===new_reser_exp_request_user_email||""==new_reser_exp_request_user_email)&&(new_reser_exp_request_user_email=$("#overlay-booking-module").find("#new_reser_request_user_email").val(),console.log(new_reser_exp_request_user_email+" no data --> "));var security=$("#reservation-security").val(),notify=$this.parents(".homey_notification");notify.find(".notify").remove(),save_exp_booking_details($('input[name="arrive"]').val(),guests,guest_message,adult_guest,child_guest,new_reser_exp_request_user_email),$(".homey_exp_extra_price input").each(function(){if($(this).is(":checked")){var e=$(this).data("name"),t=$(this).data("price"),a=$(this).data("type");temp_opt="",temp_opt=(temp_opt=(temp_opt=e)+"|"+t)+"|"+a,extra_options.push(temp_opt)}}),$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_add_exp_reservation",check_in_date:check_in_date,guests:guests,experience_id:experience_id,extra_options:extra_options,guest_message:guest_message,new_reser_exp_request_user_email:new_reser_exp_request_user_email,security:security},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class=" '+process_loader_spinner+'"></i>')},success:function(e){e.success?($(".check_in_date, .check_out_date").val(""),notify.prepend('<div class="notify text-success text-center btn-success-outlined btn btn-full-width">'+e.message+"</div>")):notify.prepend('<div class="notify text-danger text-center btn-danger-outlined btn btn-full-width">'+e.message+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})}),$("#request_hourly_reservation").on("click",function(e){e.preventDefault();var temp_opt,$this=$(this),check_in_date=$('input[name="arrive"]').val();check_in_date=homey_convert_date(check_in_date);var guest_message=$('textarea[name="guest_message"]').val();""==guest_message&&(guest_message=$("#overlay-booking-module").find('textarea[name="guest_message"]').val());var start_hour=$('select[name="start_hour"]').val(),end_hour=$('select[name="end_hour"]').val(),guests=$('input[name="guests"]').val(),listing_id=$("#listing_id").val(),new_reser_request_user_email=$("#new_reser_request_user_email").val();""==new_reser_request_user_email&&(new_reser_request_user_email=$("#overlay-booking-module").find("#new_reser_request_user_email").val());var security=$("#reservation-security").val(),notify=$this.parents(".homey_notification");notify.find(".notify").remove();var extra_options=[];$(".homey_extra_price input").each(function(){if($(this).is(":checked")){var e=$(this).data("name"),t=$(this).data("price"),a=$(this).data("type");temp_opt="",temp_opt=(temp_opt=(temp_opt=e)+"|"+t)+"|"+a,extra_options.push(temp_opt)}});var action_name_for_wp_action="homey_add_hourly_reservation";new_reser_request_user_email&&""!==new_reser_request_user_email.trim()&&(action_name_for_wp_action="hm_no_login_add_hourly_reservation"),$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:action_name_for_wp_action,check_in_date:check_in_date,start_hour:start_hour,end_hour:end_hour,guests:guests,extra_options:extra_options,guest_message:guest_message,listing_id:listing_id,new_reser_request_user_email:new_reser_request_user_email,security:security},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class=" '+process_loader_spinner+'"></i>')},success:function(e){e.success?($(".check_in_date, .check_out_date").val(""),notify.prepend('<div class="notify text-success text-center btn-success-outlined btn btn-full-width">'+e.message+"</div>")):notify.prepend('<div class="notify text-danger text-center btn-danger-outlined btn btn-full-width">'+e.message+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})}),$("#request_hourly_reservation_mobile").on("click",function(e){e.preventDefault();var temp_opt,$this=$(this),check_in_date=$('input[name="arrive"]').val();check_in_date=homey_convert_date(check_in_date);var guest_message=$('textarea[name="guest_message"]').val();""==guest_message&&(guest_message=$("#overlay-booking-module").find('textarea[name="guest_message"]').val());var start_hour=$("#start_hour_overlay").val(),end_hour=$("#end_hour_overlay").val(),guests=$('input[name="guests"]').val(),listing_id=$("#listing_id").val(),new_reser_request_user_email=$("#overlay-booking-module").find("#new_reser_request_user_email").val(),security=$("#reservation-security").val(),notify=$this.parents(".homey_notification");notify.find(".notify").remove();var extra_options=[];$(".homey_extra_price input").each(function(){if($(this).is(":checked")){var e=$(this).data("name"),t=$(this).data("price"),a=$(this).data("type");temp_opt="",temp_opt=(temp_opt=(temp_opt=e)+"|"+t)+"|"+a,extra_options.push(temp_opt)}}),$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_add_hourly_reservation",check_in_date:check_in_date,start_hour:start_hour,end_hour:end_hour,guests:guests,extra_options:extra_options,guest_message:guest_message,listing_id:listing_id,new_reser_request_user_email:new_reser_request_user_email,security:security},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class=" '+process_loader_spinner+'"></i>')},success:function(e){e.success?($(".check_in_date, .check_out_date").val(""),notify.prepend('<div class="notify text-success text-center btn-success-outlined btn btn-full-width">'+e.message+"</div>")):notify.prepend('<div class="notify text-danger text-center btn-danger-outlined btn btn-full-width">'+e.message+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})}),$("#reserve_period_host").on("click",function(e){e.preventDefault();var $this=$(this),check_in_date=$("#period_start_date").val(),check_out_date=$("#period_end_date").val(),listing_id=$("#period_listing_id").val(),period_note=$("#period_note").val(),security=$("#period-security").val(),notify=$(".homey_notification");notify.find(".notify").remove(),$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_reserve_period_host",check_in_date:check_in_date,check_out_date:check_out_date,period_note:period_note,listing_id:listing_id,security:security},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class=" '+process_loader_spinner+'"></i>')},success:function(e){e.success?(notify.prepend('<div class="notify text-success text-center btn-success-outlined btn btn-full-width">'+e.message+"</div>"),window.location.href=calendar_link):notify.prepend('<div class="notify text-danger text-center btn-danger-outlined btn btn-full-width">'+e.message+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})}),$("#reserve_exp_period_host").on("click",function(e){e.preventDefault();var $this=$(this),check_in_date=$("#period_start_date").val(),check_out_date=$("#period_end_date").val(),experience_id=$("#period_experience_id").val(),period_note=$("#period_note").val(),security=$("#period-security").val(),notify=$(".homey_notification");notify.find(".notify").remove(),$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_reserve_exp_period_host",check_in_date:check_in_date,check_out_date:check_out_date,period_note:period_note,experience_id:experience_id,security:security},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class=" '+process_loader_spinner+'"></i>')},success:function(e){e.success?(notify.prepend('<div class="notify text-success text-center btn-success-outlined btn btn-full-width">'+e.message+"</div>"),window.location.href=exp_calendar_link):notify.prepend('<div class="notify text-danger text-center btn-danger-outlined btn btn-full-width">'+e.message+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})});var homey_hourly_availability_calendar=function(){var e=new Date,t=[],a=[],i="<div id='html_booked_info' style='display:none;'>";for(var n in booked_hours_array)if(booked_hours_array.hasOwnProperty(n)&&""!==n){var o=[];o.title=HOMEY_ajax_vars.hc_reserved_label,o.start=moment.unix(n).utc().format(),o.end=moment.unix(booked_hours_array[n]).utc().format(),o.editable=!1,o.color="#fdd2d2",o.textColor="#444444",i+="<span data-start-hours='"+moment.unix(n).utc().format("h:mm")+"' data-end-hours='"+moment.unix(booked_hours_array[n]).utc().format("h:mm")+"' data-date='"+moment.unix(n).utc().format("D-M-Y")+"'></span>",t.push(o)}for(var s in i+="</div>",$("body").append(i),pending_hours_array)if(pending_hours_array.hasOwnProperty(s)&&""!==s){var r=[];r.title=HOMEY_ajax_vars.hc_pending_label,r.start=moment.unix(s).utc().format(),r.end=moment.unix(pending_hours_array[s]).utc().format(),r.editable=!1,r.color="#ffeedb",r.textColor="#333333",a.push(r)}var l=$.merge(t,a),c=document.getElementById("homey_hourly_calendar");new FullCalendar.Calendar(c,{locale:HOMEY_ajax_vars.homey_current_lang,timeZone:HOMEY_ajax_vars.homey_timezone,plugins:["timeGrid"],defaultView:"timeGridWeek",slotDuration:"00:30:00",minTime:booking_start_hour,maxTime:booking_end_hour,events:l,defaultDate:e,selectHelper:!0,selectOverlap:!1,footer:!1,nowIndicator:!0,allDayText:HOMEY_ajax_vars.hc_hours_label,weekNumbers:!1,weekNumbersWithinDays:!0,weekNumberCalculation:"ISO",editable:!1,eventLimit:!0,unselectAuto:!1,isRTL:homey_is_rtl,buttonText:{today:HOMEY_ajax_vars.hc_today_label}}).render()};"per_hour"==homey_booking_type&&"yes"==is_listing_detail&&$("#homey_hourly_calendar").length>0&&homey_hourly_availability_calendar();var prev_date=$("#hourly_check_inn").val();function disable_hourlystart_and_end(){if(""!=$("#hourly_check_inn").val()){$("span").removeClass("already-booked");var e=$("#post_already_bookd_dates").find("span"),t=$(".start_hour").find(".text"),a=$(".end_hour").find(".text"),i=homey_date_format.replace("mm","M");i=(i=i.replace("dd","D")).replace("yy","Y");var n=moment($("#hourly_check_inn").val(),i).format("D-M-Y");$(t).each(function(e,t){$(t).closest("li").removeClass("disabled")}),$(a).each(function(e,t){$(t).closest("li").removeClass("disabled")}),$(t).each(function(t,a){var i="";$(a).text().indexOf(":")>-1&&(i=(i=(i=$(a).text()).replace(" am","")).replace(" pm",""),i=n+" "+i+":00",$(e).each(function(e,t){var n=$(t).data("datetime"),o=moment(n,"DD/MM/YYYY HH:mm:ss").diff(moment(i,"DD/MM/YYYY HH:mm:ss"));0==moment.duration(o)&&($(a).addClass("already-booked"),$(a).closest("li").addClass("disabled"))}))}),$(a).each(function(t,a){var i="";$(a).text().indexOf(":")>-1&&(i=(i=(i=$(a).text()).replace(" am","")).replace(" pm",""),i=n+" "+i+":00",$(e).each(function(e,t){var n=$(t).data("datetime"),o=moment(n,"DD/MM/YYYY HH:mm:ss").diff(moment(i,"DD/MM/YYYY HH:mm:ss"));0==moment.duration(o)&&($(a).closest("li").prev().hasClass("disabled")||$(a).closest("li").prev().hasClass("checkout-available")?($(a).addClass("already-booked"),$(a).closest("li").addClass("disabled")):($(a).addClass("already-booked"),$(a).closest("li").addClass("checkout-available")))}))})}prev_date=$("#hourly_check_inn").val()}setInterval(function(){prev_date!=$("#hourly_check_inn").val()&&disable_hourlystart_and_end()},500),$("#instance_reservation, #instance_reservation_mobile").on("click",function(e){e.preventDefault();var temp_opt,extra_options=[],$this=$(this),check_in_date=$('input[name="arrive"]').val();check_in_date=homey_convert_date(check_in_date);var check_out_date=$('input[name="depart"]').val();check_out_date=homey_convert_date(check_out_date);var guests=$('input[name="guests"]').val(),adult_guest=$('input[name="adult_guest"]').val(),child_guest=$('input[name="child_guest"]').val(),guest_message=$('textarea[name="guest_message"]').val();""==guest_message&&(guest_message=$("#overlay-booking-module").find('textarea[name="guest_message"]').val());var listing_id=$("#listing_id").val(),security=$("#reservation-security").val(),notify=$this.parents(".homey_notification");notify.find(".notify").remove();var new_reser_request_user_email=$("#new_reser_request_user_email").val();void 0===new_reser_request_user_email&&(new_reser_request_user_email="");var overlay_email=$("#overlay-booking-module").find("#new_reser_request_user_email").val();void 0!==overlay_email&&""==new_reser_request_user_email&&overlay_email.length>0&&(new_reser_request_user_email=overlay_email),save_booking_details($('input[name="arrive"]').val(),$('input[name="depart"]').val(),guests,guest_message,adult_guest,child_guest),$(".homey_extra_price input").each(function(){if($(this).is(":checked")){var e=$(this).data("name"),t=$(this).data("price"),a=$(this).data("type");temp_opt="",temp_opt=(temp_opt=(temp_opt=e)+"|"+t)+"|"+a,extra_options.push(temp_opt)}});var action_name_for_wp_action="homey_instance_booking";void 0!==new_reser_request_user_email&&""!==new_reser_request_user_email.trim()&&(action_name_for_wp_action="hm_no_login_instance_booking"),$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:action_name_for_wp_action,check_in_date:check_in_date,check_out_date:check_out_date,guests:guests,adult_guest:adult_guest,child_guest:child_guest,extra_options:extra_options,guest_message:guest_message,new_reser_request_user_email:new_reser_request_user_email,listing_id:listing_id,security:security},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class=" '+process_loader_spinner+'"></i>')},success:function(e){e.success?($(".check_in_date, .check_out_date").val(""),notify.prepend('<div class="notify text-success text-center btn-success-outlined btn btn-full-width">'+e.message+"</div>"),window.location.href=e.instance_url):notify.prepend('<div class="notify text-danger text-center btn-danger-outlined btn btn-full-width">'+e.message+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})}),$("#instance_hourly_reservation, #instance_hourly_reservation_mobile").on("click",function(e){e.preventDefault();var start_hour,end_hour,temp_opt,$this=$(this),check_in_date=$('input[name="arrive"]').val();check_in_date=homey_convert_date(check_in_date),start_hour=$('select[name="start_hour"]').val(),end_hour=$('select[name="end_hour"]').val(),""==start_hour&&(start_hour=$("#overlay-booking-module").find('select[name="start_hour"]').val(),end_hour=$("#overlay-booking-module").find('select[name="end_hour"]').val());var guests=$('input[name="guests"]').val(),adult_guest=$('input[name="adult_guest"]').val(),child_guest=$('input[name="child_guest"]').val(),guest_message=$('textarea[name="guest_message"]').val();""==guest_message&&(guest_message=$("#overlay-booking-module").find('textarea[name="guest_message"]').val());var listing_id=$("#listing_id").val(),security=$("#reservation-security").val(),notify=$this.parents(".homey_notification");notify.find(".notify").remove(),(homey_is_mobile||homey_window_width<991)&&(start_hour=$("#start_hour_overlay").val(),end_hour=$("#end_hour_overlay").val()),save_hourl_booking_details($('input[name="arrive"]').val(),start_hour,end_hour,guests,guest_message,adult_guest,child_guest);var extra_options=[];$(".homey_extra_price input").each(function(){if($(this).is(":checked")){var e=$(this).data("name"),t=$(this).data("price"),a=$(this).data("type");temp_opt="",temp_opt=(temp_opt=(temp_opt=e)+"|"+t)+"|"+a,extra_options.push(temp_opt)}});var new_reser_request_user_email=$("#new_reser_request_user_email").val();void 0===new_reser_request_user_email&&(new_reser_request_user_email="");var overlay_email=$("#overlay-booking-module").find("#new_reser_request_user_email").val();void 0!==overlay_email&&""==new_reser_request_user_email&&overlay_email.length>0&&(new_reser_request_user_email=overlay_email);var action_name_for_wp_action="homey_instance_hourly_booking";void 0!==new_reser_request_user_email&&""!==new_reser_request_user_email.trim()&&(action_name_for_wp_action="hm_no_login_instance_hourly_booking"),$.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:action_name_for_wp_action,check_in_date:check_in_date,start_hour:start_hour,end_hour:end_hour,guests:guests,extra_options:extra_options,listing_id:listing_id,guest_message:guest_message,security:security,new_reser_request_user_email:new_reser_request_user_email},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class=" '+process_loader_spinner+'"></i>')},success:function(e){e.success?($(".check_in_date, .start_hour, .end_hour").val(""),notify.prepend('<div class="notify text-success text-center btn-success-outlined btn btn-full-width">'+e.message+"</div>"),window.location.href=e.instance_url):notify.prepend('<div class="notify text-danger text-center btn-danger-outlined btn btn-full-width">'+e.message+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})}),$("#instance_exp_reservation, #instance_exp_reservation_mobile").on("click",function(e){e.preventDefault();var temp_opt,$this=$(this),check_in_date=$('input[name="arrive"]').val();check_in_date=homey_convert_date(check_in_date);var guests=$('input[name="exp_guests"]').val(),adult_guest=$('input[name="exp_adult_guest"]').val(),child_guest=$('input[name="exp_child_guest"]').val(),guest_message=$('textarea[name="exp_guest_message"]').val();""==guest_message&&(guest_message=$("#overlay-booking-module").find('textarea[name="guest_message"]').val());var experience_id=$("#experience_id").val(),security=$("#reservation-security").val(),notify=$this.parents(".homey_notification");notify.find(".notify").remove();var new_reser_request_user_email=$("#new_reser_exp_request_user_email").val();""==new_reser_request_user_email&&(new_reser_request_user_email=$("#overlay-booking-module").find("#new_reser_request_user_email").val()),save_exp_booking_details($('input[name="arrive"]').val(),guests,guest_message,adult_guest,child_guest),(homey_is_mobile||homey_window_width<991)&&(start_hour=$("#start_hour_overlay").val(),end_hour=$("#end_hour_overlay").val());var extra_options=[];$(".homey_exp_extra_price input").each(function(){if($(this).is(":checked")){var e=$(this).data("name"),t=$(this).data("price"),a=$(this).data("type");temp_opt="",temp_opt=(temp_opt=(temp_opt=e)+"|"+t)+"|"+a,extra_options.push(temp_opt)}}),$.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"homey_instant_exp_booking",check_in_date:check_in_date,guests:guests,extra_options:extra_options,new_reser_exp_request_user_email:new_reser_request_user_email,experience_id:experience_id,guest_message:guest_message,security:security},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class=" '+process_loader_spinner+'"></i>')},success:function(e){e.success?($(".check_in_date").val(""),notify.prepend('<div class="notify text-success text-center btn-success-outlined btn btn-full-width">'+e.message+"</div>"),window.location.href=e.instance_url):($(".account-loggedin").length<1&&jQuery("#modal-login").modal("show"),notify.prepend('<div class="notify text-danger text-center btn-danger-outlined btn btn-full-width">'+e.message+"</div>"))},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})}),$(".confirm-reservation").on("click",function(e){e.preventDefault();var $this=$(this),reservation_id=$this.data("reservation_id"),parentDIV=$this.parents(".user-dashboard-right");$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_confirm_reservation",reservation_id:reservation_id},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class=" '+process_loader_spinner+'"></i>')},success:function(e){parentDIV.find(".alert").remove(),e.success?(parentDIV.find(".dashboard-area").prepend(e.message),$this.remove()):parentDIV.find(".dashboard-area").prepend(e.message)},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})}),$(".confirm-offsite-reservation").on("click",function(e){e.preventDefault();var $this=$(this),reservation_id=$this.data("reservation_id"),parentDIV=$this.parents(".user-dashboard-right");$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_confirm_offsite_reservation",reservation_id:reservation_id},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class=" '+process_loader_spinner+'"></i>')},success:function(e){parentDIV.find(".alert").remove(),e.success?(parentDIV.find(".dashboard-area").prepend(e.message),$this.remove()):parentDIV.find(".dashboard-area").prepend(e.message)},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})}),$("#guest_paid_button").on("click",function(e){e.preventDefault();var $this=$(this),parentDIV=$this.parents(".user-dashboard-right"),reservation_id=$("#reservation_id").val();$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_guest_made_payment",reservation_id:reservation_id},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class=" '+process_loader_spinner+'"></i>')},success:function(e){parentDIV.find(".alert").remove(),e.success?(parentDIV.find(".dashboard-area").prepend(e.message),$this.remove()):parentDIV.find(".dashboard-area").prepend(e.message)},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})}),$("#decline").on("click",function(e){e.preventDefault();var $this=$(this),reservation_id=$("#reservationID").val(),reason=$("#reason22").val(),parentDIV=$this.parents(".user-dashboard-right");$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_decline_reservation",reservation_id:reservation_id,reason:reason},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class=" '+process_loader_spinner+'"></i>')},success:function(e){parentDIV.find(".alert").remove(),e.success?($this.attr("disabled",!0),window.location.reload()):parentDIV.find(".dashboard-area").prepend('<div class="alert alert-danger alert-dismissible" role="alert"><button type="button" class="close" data-hide="alert" aria-label="Close"><i class="homey-icon homey-icon-close"></i></button>'+e.message+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})}),$("#decline_hourly").on("click",function(e){e.preventDefault();var $this=$(this),reservation_id=$("#reservationID").val(),reason=$("#reason").val(),parentDIV=$this.parents(".user-dashboard-right");$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_decline_hourly_reservation",reservation_id:reservation_id,reason:reason},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class=" '+process_loader_spinner+'"></i>')},success:function(e){parentDIV.find(".alert").remove(),e.success?($this.attr("disabled",!0),window.location.reload()):parentDIV.find(".dashboard-area").prepend('<div class="alert alert-danger alert-dismissible" role="alert"><button type="button" class="close" data-hide="alert" aria-label="Close"><i class="homey-icon homey-icon-close"></i></button>'+e.message+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})}),$("#decline-reservation-btn").click(function(){console.log("..this that.."),$("html, body").animate({scrollTop:$("#decline-reservation").offset().top+150},"slow")}),$("#cancel-reservation-btn").click(function(){console.log("..this that.."),$("html, body").animate({scrollTop:$("#cancel-reservation").offset().top+150},"slow")}),$("#cancelled").on("click",function(e){e.preventDefault();var $this=$(this),reservation_id=$("#reservationID").val(),reason=$("#reason").val(),host_cancel=$("#host_cancel").val(),parentDIV=$this.parents(".user-dashboard-right");$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_cancelled_reservation",reservation_id:reservation_id,host_cancel:host_cancel,reason:reason},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class=" '+process_loader_spinner+'"></i>')},success:function(e){parentDIV.find(".alert").remove(),e.success?($this.attr("disabled",!0),window.location.reload()):parentDIV.find(".dashboard-area").prepend('<div class="alert alert-danger alert-dismissible" role="alert"><button type="button" class="close" data-hide="alert" aria-label="Close"><i class="homey-icon homey-icon-close"></i></button>'+e.message+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})}),$("#cancelled_hourly").on("click",function(e){e.preventDefault();var $this=$(this),reservation_id=$("#reservationID").val(),reason=$("#reason").val(),host_cancel=$("#host_cancel").val(),parentDIV=$this.parents(".user-dashboard-right");$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_cancelled_reservation",reservation_id:reservation_id,host_cancel:host_cancel,reason:reason},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class=" '+process_loader_spinner+'"></i>')},success:function(e){parentDIV.find(".alert").remove(),e.success?($this.attr("disabled",!0),window.location.reload()):parentDIV.find(".dashboard-area").prepend('<div class="alert alert-danger alert-dismissible" role="alert"><button type="button" class="close" data-hide="alert" aria-label="Close"><i class="homey-icon homey-icon-close"></i></button>'+e.message+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})}),$(".confirm-exp-reservation").on("click",function(e){e.preventDefault();var $this=$(this),reservation_id=$this.data("reservation_id"),parentDIV=$this.parents(".user-dashboard-right");$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_confirm_exp_reservation",reservation_id:reservation_id},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class=" '+process_loader_spinner+'"></i>')},success:function(e){parentDIV.find(".alert").remove(),e.success?(parentDIV.find(".dashboard-area").prepend(e.message),$this.remove()):parentDIV.find(".dashboard-area").prepend(e.message)},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})}),$("#guest_paid_exp_button").on("click",function(e){e.preventDefault();var $this=$(this),parentDIV=$this.parents(".user-dashboard-right"),reservation_id=$("#reservation_id").val();$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_guest_made_payment",reservation_id:reservation_id},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class=" '+process_loader_spinner+'"></i>')},success:function(e){parentDIV.find(".alert").remove(),e.success?(parentDIV.find(".dashboard-area").prepend(e.message),$this.remove()):parentDIV.find(".dashboard-area").prepend(e.message)},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})}),$("#exp-decline").on("click",function(e){e.preventDefault();var $this=$(this),reservation_id=$("#reservationID").val(),reason=$("#reason22").val(),parentDIV=$this.parents(".user-dashboard-right");$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_exp_decline_reservation",reservation_id:reservation_id,reason:reason},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class=" '+process_loader_spinner+'"></i>')},success:function(e){parentDIV.find(".alert").remove(),e.success?($this.attr("disabled",!0),window.location.reload()):parentDIV.find(".dashboard-area").prepend('<div class="alert alert-danger alert-dismissible" role="alert"><button type="button" class="close" data-hide="alert" aria-label="Close"><i class="homey-icon homey-icon-close"></i></button>'+e.message+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})}),$("#exp_decline_hourly").on("click",function(e){e.preventDefault();var $this=$(this),reservation_id=$("#reservationID").val(),reason=$("#reason").val(),parentDIV=$this.parents(".user-dashboard-right");$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_exp_decline_reservation",reservation_id:reservation_id,reason:reason},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class=" '+process_loader_spinner+'"></i>')},success:function(e){parentDIV.find(".alert").remove(),e.success?($this.attr("disabled",!0),window.location.reload()):parentDIV.find(".dashboard-area").prepend('<div class="alert alert-danger alert-dismissible" role="alert"><button type="button" class="close" data-hide="alert" aria-label="Close"><i class="homey-icon homey-icon-close"></i></button>'+e.message+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})}),$("#decline-exp-reservation-btn").click(function(){$("html, body").animate({scrollTop:$("#decline-exp-reservation").offset().top+150},"slow")}),$("#cancel-exp-reservation-btn").click(function(){$("html, body").animate({scrollTop:$("#cancel-exp-reservation").offset().top+150},"slow")}),$("#exp-cancelled").on("click",function(e){e.preventDefault();var $this=$(this),reservation_id=$("#reservationID").val(),reason=$("#reason").val(),host_cancel=$("#host_cancel").val(),parentDIV=$this.parents(".user-dashboard-right");$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_exp_cancelled_reservation",reservation_id:reservation_id,host_cancel:host_cancel,reason:reason},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class=" '+process_loader_spinner+'"></i>')},success:function(e){parentDIV.find(".alert").remove(),e.success?($this.attr("disabled",!0),window.location.reload()):parentDIV.find(".dashboard-area").prepend('<div class="alert alert-danger alert-dismissible" role="alert"><button type="button" class="close" data-hide="alert" aria-label="Close"><i class="homey-icon homey-icon-close"></i></button>'+e.message+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})}),$("#exp_cancelled_hourly").on("click",function(e){e.preventDefault();var $this=$(this),reservation_id=$("#reservationID").val(),reason=$("#reason").val(),host_cancel=$("#host_cancel").val(),parentDIV=$this.parents(".user-dashboard-right");$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_exp_cancelled_reservation",reservation_id:reservation_id,host_cancel:host_cancel,reason:reason},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class=" '+process_loader_spinner+'"></i>')},success:function(e){parentDIV.find(".alert").remove(),e.success?($this.attr("disabled",!0),window.location.reload()):parentDIV.find(".dashboard-area").prepend('<div class="alert alert-danger alert-dismissible" role="alert"><button type="button" class="close" data-hide="alert" aria-label="Close"><i class="homey-icon homey-icon-close"></i></button>'+e.message+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})});var homey_booking_paypal_payment=function($this,reservation_id,security){$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_booking_paypal_payment",reservation_id:reservation_id,security:security},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class=" '+process_loader_spinner+'"></i>'),$("#homey_notify").html('<div class="alert alert-success alert-dismissible" role="alert">'+paypal_connecting+"</div>")},success:function(e){e.success?window.location.href=e.payment_execute_url:$("#homey_notify").html('<div class="alert alert-danger alert-dismissible" role="alert">'+e.message+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})},homey_exp_booking_paypal_payment=function($this,reservation_id,security){$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_exp_booking_paypal_payment",reservation_id:reservation_id,security:security},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class=" '+process_loader_spinner+'"></i>'),$("#homey_notify").html('<div class="alert alert-success alert-dismissible" role="alert">'+paypal_connecting+"</div>")},success:function(e){e.success?window.location.href=e.payment_execute_url:$("#homey_notify").html('<div class="alert alert-danger alert-dismissible" role="alert">'+e.message+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})},homey_hourly_booking_paypal_payment=function($this,reservation_id,security){$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_hourly_booking_paypal_payment",reservation_id:reservation_id,security:security},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class=" '+process_loader_spinner+'"></i>'),$("#homey_notify").html('<div class="alert alert-success alert-dismissible" role="alert">'+paypal_connecting+"</div>")},success:function(e){e.success?window.location.href=e.payment_execute_url:$("#homey_notify").html('<div class="alert alert-danger alert-dismissible" role="alert">'+e.message+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})};$("#make_booking_payment").on("click",function(e){e.preventDefault();var t=$(this),a=$("#reservation_id").val(),i=$("#checkout-security").val(),n=$("input[name='payment_gateway']:checked").val();(void 0==n&&$("#homey_notify").html('<div class="alert alert-danger alert-dismissible" role="alert">'+choose_gateway_text+"</div>"),"paypal"===n)?homey_booking_paypal_payment(t,a,i):"stripe"===n&&($(this).parents(".dashboard-area").find(".homey_stripe_simple button").trigger("click"),$("#homey_notify").html(""))}),$("#make_exp_booking_payment").on("click",function(e){e.preventDefault();var t=$(this),a=$("#reservation_id").val(),i=$("#checkout-security").val(),n=$("input[name='payment_gateway']:checked").val();(void 0==n&&$("#homey_notify").html('<div class="alert alert-danger alert-dismissible" role="alert">'+choose_gateway_text+"</div>"),"paypal"===n)?homey_exp_booking_paypal_payment(t,a,i):"stripe"===n&&($(this).parents(".dashboard-area").find(".homey_stripe_simple button").trigger("click"),$("#homey_notify").html(""))}),$("#make_hourly_booking_payment").on("click",function(e){e.preventDefault();var t=$(this),a=$("#reservation_id").val(),i=$("#checkout-security").val(),n=$("input[name='payment_gateway']:checked").val();(void 0==n&&$("#homey_notify").html('<div class="alert alert-danger alert-dismissible" role="alert">'+choose_gateway_text+"</div>"),"paypal"===n)?homey_hourly_booking_paypal_payment(t,a,i):"stripe"===n&&($(this).parents(".dashboard-area").find(".homey_stripe_simple button").trigger("click"),$("#homey_notify").html(""))});var homey_instance_booking_paypal_payment=function($this,check_in,check_out,guests,extra_options,listing_id,renter_message,security,reservor_name,reservor_phone,adult_guest,child_guest,reservation_no_userHash){$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_instance_booking_paypal_payment",check_in:check_in,check_out:check_out,guests:guests,adult_guest:adult_guest,child_guest:child_guest,extra_options:extra_options,listing_id:listing_id,renter_message:renter_message,security:security,reservor_name:reservor_name,reservor_phone:reservor_phone,reservation_no_userHash:reservation_no_userHash},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class=" '+process_loader_spinner+'"></i>'),$("#instance_noti").html('<div class="alert alert-success alert-dismissible" role="alert">'+paypal_connecting+"</div>")},success:function(e){e.success?window.location.href=e.payment_execute_url:$("#instance_noti").html('<div class="alert alert-danger alert-dismissible" role="alert">'+e.message+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})},homey_instance_exp_booking_paypal_payment=function($this,check_in,guests,extra_options,experience_id,renter_message,security,reservor_name,reservor_phone){$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_instance_exp_booking_paypal_payment",check_in:check_in,guests:guests,extra_options:extra_options,experience_id:experience_id,renter_message:renter_message,security:security,reservor_name:reservor_name,reservor_phone:reservor_phone},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class=" '+process_loader_spinner+'"></i>'),$("#instance_noti").html('<div class="alert alert-success alert-dismissible" role="alert">'+paypal_connecting+"</div>")},success:function(e){e.success?window.location.href=e.payment_execute_url:$("#instance_noti").html('<div class="alert alert-danger alert-dismissible" role="alert">'+e.message+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})},homey_hourly_instance_booking_paypal_payment=function($this,check_in,check_in_hour,check_out_hour,start_hour,end_hour,guests,extra_options,listing_id,renter_message,security,reservation_no_userHash){$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_hourly_instance_booking_paypal_payment",check_in:check_in,check_in_hour:check_in_hour,check_out_hour:check_out_hour,start_hour:start_hour,end_hour:end_hour,guests:guests,extra_options:extra_options,listing_id:listing_id,renter_message:renter_message,security:security,reservation_no_userHash:reservation_no_userHash},beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class=" '+process_loader_spinner+'"></i>'),$("#instance_noti").html('<div class="alert alert-success alert-dismissible" role="alert">'+paypal_connecting+"</div>")},success:function(e){e.success?window.location.href=e.payment_execute_url:$("#instance_noti").html('<div class="alert alert-danger alert-dismissible" role="alert">'+e.message+"</div>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})};$("#make_instance_booking_payment").on("click",function(e){e.preventDefault();var t,a=$(this),i=$("#check_in_date").val(),n=$("#check_out_date").val(),o=$("#guests").val(),s=$("input[name='adult_guest']").val(),r=$("input[name='child_guest']").val(),l=$("#listing_id").val(),c=$("#renter_message").val(),d=$("#checkout-security").val(),u=$("#first-name").val()+" "+$("#last-name").val(),p=$("#phone").val(),v=$("#reservation_no_userHash").val(),m=[];$(".homey_extra_price").each(function(){var e=$(this).data("name"),a=$(this).data("price"),i=$(this).data("type");t="",t=(t=(t=e)+"|"+a)+"|"+i,m.push(t)}),$("#instance_noti").empty();var h=$("input[name='payment_gateway']:checked").val();(void 0==h&&$("#instance_noti").html('<div class="alert alert-danger alert-dismissible" role="alert">'+choose_gateway_text+"</div>"),"paypal"===h)?homey_instance_booking_paypal_payment(a,i,n,o,m,l,c,d,u,p,s,r,v):"stripe"===h&&$(this).parents("form").find(".homey_stripe_simple button").trigger("click")}),$("#make_instance_exp_booking_payment").on("click",function(e){e.preventDefault();var t,a=$(this),i=$("#check_in_date").val(),n=$("#guests").val(),o=$("#experience_id").val(),s=$("#renter_message").val(),r=$("#checkout-security").val(),l=$("#first-name").val()+" "+$("#last-name").val(),c=$("#phone").val(),d=[];$(".homey_extra_price").each(function(){var e=$(this).data("name"),a=$(this).data("price"),i=$(this).data("type");t="",t=(t=(t=e)+"|"+a)+"|"+i,d.push(t)}),$("#instance_noti").empty();var u=$("input[name='payment_gateway']:checked").val();(void 0==u&&$("#instance_noti").html('<div class="alert alert-danger alert-dismissible" role="alert">'+choose_gateway_text+"</div>"),"paypal"===u)?homey_instance_exp_booking_paypal_payment(a,i,n,d,o,s,r,l,c):"stripe"===u&&$(this).parents("form").find(".homey_stripe_simple button").trigger("click")}),$("#make_hourly_instance_booking_payment").on("click",function(e){e.preventDefault();var t,a=$(this),i=$("#check_in_date").val(),n=$("#check_in_hour").val(),o=$("#check_out_hour").val(),s=$("#start_hour").val(),r=$("#end_hour").val(),l=$("#guests").val(),c=$("#listing_id").val(),d=$("#renter_message").val(),u=$("#checkout-security").val(),p=$("#reservation_no_userHash").val(),v=[];$(".homey_extra_price").each(function(){var e=$(this).data("name"),a=$(this).data("price"),i=$(this).data("type");t="",t=(t=(t=e)+"|"+a)+"|"+i,v.push(t)}),$("#instance_noti").empty();var m=$("input[name='payment_gateway']:checked").val();(void 0==m&&$("#instance_noti").html('<div class="alert alert-danger alert-dismissible" role="alert">'+choose_gateway_text+"</div>"),"paypal"===m)?homey_hourly_instance_booking_paypal_payment(a,i,n,o,s,r,l,v,c,d,u,p):"stripe"===m&&$(this).parents("form").find(".homey_stripe_simple button").trigger("click")});var is_no_login_user_reg=$(".homey-booking-block-body-1").find("#email").val();if(void 0!==is_no_login_user_reg&&""!=is_no_login_user_reg){$(".homey-booking-block-title-2").removeClass("inactive mb-0"),$(".homey-booking-block-body-2").slideDown("slow"),$(".homey-booking-block-title-1").addClass("mb-0"),$(".homey-booking-block-body-1").slideUp("slow"),$(".homey-booking-block-title-1 .text-success, .homey-booking-block-title-1 .edit-booking-form").removeClass("hidden"),$(".homey-booking-block-title-1 .text-success, .homey-booking-block-title-1 .edit-booking-form").show();var renter_message=$("#renter_message").val();$("#guest_message").val(renter_message)}var first_name=$("#first-name").val(),last_name=$("#last-name").val(),phone=$("#phone").val(),renter_message=$("#renter_message").val();$("button.homey-booking-step-1").on("click",function(e){e.preventDefault();var $this=$(this),first_name=$("#first-name").val(),last_name=$("#last-name").val(),click_to_agreement=$(document).find("input[name='click_to_agreement']:checked").val();if($(".homey-booking-block-body-1 .continue-block-button p.error").remove(),void 0!=click_to_agreement){var phone=$("#phone").val(),reservation_no_userHash="";void 0!==$("#reservation_no_userHash")&&(reservation_no_userHash=$("#reservation_no_userHash").val());var renter_message=$("#renter_message").val(),action_name="homey_instance_step_1";$("#is-experience-step-1").length>0&&(action_name="homey_exp_instance_step_1"),$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:action_name,first_name:first_name,last_name:last_name,phone:phone,reservation_no_userHash:reservation_no_userHash},beforeSend:function(){$this.children("i").remove(),$(".homey-booking-block-body-1 .continue-block-button p.error").remove(),$this.prepend('<i class=" '+process_loader_spinner+'"></i>')},success:function(e){e.success?($(".homey-booking-block-title-2").removeClass("inactive mb-0"),$(".homey-booking-block-body-2").slideDown("slow"),$(".homey-booking-block-title-1").addClass("mb-0"),$(".homey-booking-block-body-1").slideUp("slow"),$(".homey-booking-block-title-1 .text-success, .homey-booking-block-title-1 .edit-booking-form").removeClass("hidden"),$(".homey-booking-block-title-1 .text-success, .homey-booking-block-title-1 .edit-booking-form").show(),$("#guest_message").val(renter_message)):$(".homey-booking-block-body-1 .continue-block-button").prepend('<p class="error text-danger"><i class="homey-icon homey-icon-close"></i> '+e.message+"</p>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner)}})}else $(".homey-booking-block-body-1 .continue-block-button").prepend('<p class="error text-danger"><i class="homey-icon homey-icon-close"></i> '+agree_term_text+"</p>")}),$("button.homey-booking-step-2").on("click",function(e){e.preventDefault();var t=$(this);null!=document.getElementById("stripe_cardholder_name")&&(document.getElementById("stripe_cardholder_name").value="",document.getElementById("stripe_cardholder_email").value="",document.getElementById("stripe_cardholder_name").setAttribute("autocomplete","off"),document.getElementById("stripe_cardholder_email").setAttribute("autocomplete","off"));var a=$("input[name='agreement']:checked").val();if($(".homey-booking-block-body-2 .continue-block-button p.error").remove(),void 0!=a){var i=jQuery("#checkout-security").val();if(jQuery("#check_in_hour").length>0){var n=jQuery("#check_in_date").val(),o=jQuery("#start_hour").val(),s=jQuery("#end_hour").val(),r=jQuery("#listing_id").val();jQuery.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"check_booking_availability_on_hour_change",check_in_date:n,start_hour:o,end_hour:s,listing_id:r,security:i},beforeSend:function(){t.children("i").remove(),$(".homey-booking-block-body-2 .continue-block-button p.error").remove(),t.prepend('<i class=" '+process_loader_spinner+'"></i>')},success:function(e){e.success?(console.log("dates are available checking on last step"),$(".homey-booking-block-title-3").removeClass("inactive mb-0"),$(".homey-booking-block-body-3").slideDown("slow"),$(".homey-booking-block-title-2").addClass("mb-0"),$(".homey-booking-block-body-2").slideUp("slow"),$(".homey-booking-block-title-2 .text-success, .homey-booking-block-title-2 .edit-booking-form").removeClass("hidden"),$(".homey-booking-block-title-2 .text-success, .homey-booking-block-title-2 .edit-booking-form").show()):($(".homey-booking-block-body-2 .continue-block-button").prepend('<p class="error text-danger"><i class="homey-icon homey-icon-close"></i> '+already_booked_text+"</p>"),window.history.back())},complete:function(){t.children("i").removeClass(process_loader_spinner)}})}else{var n=jQuery("#check_in_date").val(),l=jQuery("#check_out_date").val(),r=jQuery("#listing_id").val();jQuery.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"check_booking_availability_on_date_change",check_in_date:n,check_out_date:l,listing_id:r,security:i},beforeSend:function(){t.children("i").remove(),$(".homey-booking-block-body-2 .continue-block-button p.error").remove(),t.prepend('<i class=" '+process_loader_spinner+'"></i>')},success:function(e){e.success?(console.log("dates are available checking on last step"),$(".homey-booking-block-title-3").removeClass("inactive mb-0"),$(".homey-booking-block-body-3").slideDown("slow"),$(".homey-booking-block-title-2").addClass("mb-0"),$(".homey-booking-block-body-2").slideUp("slow"),$(".homey-booking-block-title-2 .text-success, .homey-booking-block-title-2 .edit-booking-form").removeClass("hidden"),$(".homey-booking-block-title-2 .text-success, .homey-booking-block-title-2 .edit-booking-form").show()):($(".homey-booking-block-body-2 .continue-block-button").prepend('<p class="error text-danger"><i class="homey-icon homey-icon-close"></i> '+already_booked_text+"</p>"),window.history.back())},complete:function(){t.children("i").removeClass(process_loader_spinner)}})}}else $(".homey-booking-block-body-2 .continue-block-button").prepend('<p class="error text-danger"><i class="homey-icon homey-icon-close"></i> '+agree_term_text+"</p>")}),$("button.homey-booking-exp-step-2").on("click",function(e){e.preventDefault();var t=$(this);null!=document.getElementById("stripe_cardholder_name")&&(document.getElementById("stripe_cardholder_name").value="",document.getElementById("stripe_cardholder_email").value="",document.getElementById("stripe_cardholder_name").setAttribute("autocomplete","off"),document.getElementById("stripe_cardholder_email").setAttribute("autocomplete","off"));var a=$("input[name='agreement']:checked").val();if($(".homey-booking-block-body-2 .continue-block-button p.error").remove(),void 0!=a){var i=jQuery("#checkout-security").val(),n=jQuery("#check_in_date").val(),o=jQuery("#experience_id").val();jQuery.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"check_exp_availability_on_date_change",check_in_date:n,experience_id:o,security:i},beforeSend:function(){t.children("i").remove(),$(".homey-booking-block-body-2 .continue-block-button p.error").remove(),t.prepend('<i class=" '+process_loader_spinner+'"></i>')},success:function(e){e.success?(console.log("exp dates are available checking on last step"),$(".homey-booking-block-title-3").removeClass("inactive mb-0"),$(".homey-booking-block-body-3").slideDown("slow"),$(".homey-booking-block-title-2").addClass("mb-0"),$(".homey-booking-block-body-2").slideUp("slow"),$(".homey-booking-block-title-2 .text-success, .homey-booking-block-title-2 .edit-booking-form").removeClass("hidden"),$(".homey-booking-block-title-2 .text-success, .homey-booking-block-title-2 .edit-booking-form").show()):($(".homey-booking-block-body-2 .continue-block-button").prepend('<p class="error text-danger"><i class="homey-icon homey-icon-close"></i> '+already_booked_text+"</p>"),window.history.back())},complete:function(){t.children("i").removeClass(process_loader_spinner)}})}else $(".homey-booking-block-body-2 .continue-block-button").prepend('<p class="error text-danger"><i class="homey-icon homey-icon-close"></i> '+agree_term_text+"</p>")}),$(".homey-booking-block-title-1 .edit-booking-form").on("click",function(e){e.preventDefault(),$(".homey-booking-block-title-2, .homey-booking-block-title-3").addClass("mb-0"),$(".homey-booking-block-body-2, .homey-booking-block-body-3").slideUp("slow"),$(".homey-booking-block-title-1").removeClass("mb-0"),$(".homey-booking-block-body-1").slideDown("slow")}),$(".homey-booking-block-title-2 .edit-booking-form").on("click",function(e){e.preventDefault(),$(".homey-booking-block-title-1, .homey-booking-block-title-3").addClass("mb-0"),$(".homey-booking-block-body-1, .homey-booking-block-body-3").slideUp("slow"),$(".homey-booking-block-title-2").removeClass("mb-0"),$(".homey-booking-block-body-2").slideDown("slow")}),$(".contact_listing_host").on("click",function(e){e.preventDefault();var $this=$(this),$host_contact_wrap=$this.parents(".host-contact-wrap"),$form=$this.parents("form"),$messages=$host_contact_wrap.find(".homey_contact_messages");$.ajax({url:ajaxurl,data:$form.serialize(),method:$form.attr("method"),dataType:"JSON",beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class=" '+process_loader_spinner+'"></i>')},success:function(e){e.success?($messages.empty().append(e.msg),$form.find("input").val(""),$form.find("textarea").val("")):($messages.empty().append(e.msg),$this.children("i").removeClass(process_loader_spinner)),1==homey_reCaptcha&&homeyReCaptchaReset()},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner),$this.children("i").addClass(success_icon)}})}),$(".contact_experience_host").on("click",function(e){e.preventDefault();var $this=$(this),$host_contact_wrap=$this.parents(".host-contact-wrap"),$form=$this.parents("form"),$messages=$host_contact_wrap.find(".homey_contact_messages");$.ajax({url:ajaxurl,data:$form.serialize(),method:$form.attr("method"),dataType:"JSON",beforeSend:function(){$this.children("i").remove(),$this.prepend('<i class=" '+process_loader_spinner+'"></i>')},success:function(e){e.success?($messages.empty().append(e.msg),$form.find("input").val(""),$form.find("textarea").val("")):($messages.empty().append(e.msg),$this.children("i").removeClass(process_loader_spinner)),1==homey_reCaptcha&&homeyReCaptchaReset()},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)},complete:function(){$this.children("i").removeClass(process_loader_spinner),$this.children("i").addClass(success_icon)}})}),$("#host_detail_contact").on("click",function(e){e.preventDefault();var $this,current_element=$(this),$form=$(this).parents("form");$.ajax({type:"post",url:ajaxurl,data:$form.serialize(),method:$form.attr("method"),dataType:"JSON",beforeSend:function(){current_element.children("i").remove(),current_element.prepend('<i class=" '+process_loader_spinner+'"></i>')},success:function(e){current_element.children("i").removeClass(process_loader_spinner),e.success?($("#form_messages").empty().append(e.msg),current_element.children("i").addClass(success_icon)):$("#form_messages").empty().append(e.msg),1==homey_reCaptcha&&homeyReCaptchaReset()},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})}),$(".homey-print").length>0&&$(".homey-print").on("click",function(e){var listingID,printWindow;e.preventDefault(),listingID=$(this).attr("data-listing-id"),printWindow=window.open("","Print Me","width=850 ,height=842"),$.ajax({type:"POST",url:ajaxurl,data:{action:"homey_create_print",listing_id:listingID},success:function(e){printWindow.document.write(e),printWindow.document.close(),printWindow.focus()},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})}),$(".homey-print-experience").length>0&&$(".homey-print-experience").on("click",function(e){var experienceID,printWindow;e.preventDefault(),experienceID=$(this).attr("data-experience-id"),printWindow=window.open("","Print Me","width=850 ,height=842"),$.ajax({type:"POST",url:ajaxurl,data:{action:"homey_create_experience_print",experience_id:experienceID},success:function(e){printWindow.document.write(e),printWindow.document.close(),printWindow.focus()},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})}),$(".homey_login_button").on("click",function(e){e.preventDefault();var t=$(this);homey_login(t)}),$(".homey-register-button").on("click",function(e){e.preventDefault();var t=$(this),a=$(".iti__selected-flag").first().attr("title"),i="",n="";void 0!==a&&(i=a.match(/:\s\+(\d+)/)),i&&i.length>1&&(n="+"+i[1]),$("#iti__selected_flag").val(n),homey_register(t)});var homey_login=function(current){var $form=current.parents("form"),$messages=$(".homey_login_messages"),$reservation_login_required=$("#reservation_login_required").val();$.ajax({type:"post",url:ajaxurl,dataType:"json",data:$form.serialize(),beforeSend:function(){$messages.empty().append('<p class="success text-success"> '+login_sending+"</p>"),jQuery(current).children("i").remove(),jQuery(current).prepend('<i class=" homey-icon homey-icon-loading-half fa-spinner"></i>')},success:function(e){if(e.success){$messages.empty().append('<p class="success text-success"><i class="homey-icon homey-icon-check-circle-1"></i> '+e.msg+"</p>");var t=jQuery(document).find("input[name='_wp_http_referer']").val();return 1==$reservation_login_required?(window.location.href=t,!1):"/"!=t&&"same_page"==login_redirect_type?(-1!==t.indexOf("?")?window.location.href=t+"&n="+new Date().getTime():window.location.href=t+"?n="+new Date().getTime(),!1):"same_page"==login_redirect_type?(window.location.reload(!0),!1):(-1!==t.indexOf("?")&&-1!==login_redirect.indexOf("?")?window.location.href=login_redirect+"&n="+new Date().getTime():window.location.href=login_redirect+"?n="+new Date().getTime(),!1)}jQuery(current).children("i").remove(),$messages.empty().append('<p class="error text-danger"><i class="homey-icon homey-icon-close"></i> '+e.msg+"</p>"),1==homey_reCaptcha&&homeyReCaptchaReset()},error:function(xhr,status,error){jQuery(current).children("i").remove(),$messages.empty().append('<p class="error text-danger"><i class="homey-icon homey-icon-close"></i>'+HOMEY_ajax_vars.homey_login_register_msg_text+"</p>");var err=eval("("+xhr.responseText+")");console.log(err.Message)}})},homey_register=function(currnt){var $form=currnt.parents("form"),$messages=$(".homey_register_messages");$.ajax({type:"post",url:ajaxurl,dataType:"json",data:$form.serialize(),beforeSend:function(){$messages.empty().append('<p class="success text-success"> '+login_sending+"</p>"),jQuery(currnt).children("i").remove(),jQuery(currnt).prepend('<i class=" homey-icon homey-icon-loading-half fa-spinner"></i>')},success:function(e){e.success?($messages.empty().append('<p class="success text-success"><i class="homey-icon homey-icon-check-circle-1"></i> '+e.msg+"</p>"),$(".homey_login_messages").empty().append('<p class="success text-success"><i class="homey-icon homey-icon-check-circle-1"></i> '+e.msg+"</p>"),$("#modal-register").modal("hide"),$("#modal-login").modal("show")):(jQuery(currnt).children("i").remove(),$messages.empty().append('<p class="error text-danger"><i class="homey-icon homey-icon-close"></i> '+e.msg+"</p>")),1==homey_reCaptcha&&homeyReCaptchaReset(),1==homey_reCaptcha&&homeyReCaptchaReset()},error:function(xhr,status,error){jQuery(currnt).children("i").remove();var err=eval("("+xhr.responseText+")");console.log(err.Message)}})};$("#homey_forgetpass").on("click",function(e){e.preventDefault();var user_login=$("#user_login_forgot").val(),security=$("#homey_resetpassword_security").val();$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_reset_password",user_login:user_login,security:security},beforeSend:function(){$("#homey_msg_reset").empty().append('<p class="success text-success"> '+login_sending+"</p>")},success:function(e){e.success?$("#homey_msg_reset").empty().append('<p class="success text-success"><i class="homey-icon homey-icon-check-circle-1"></i> '+e.msg+"</p>"):$("#homey_msg_reset").empty().append('<p class="error text-danger"><i class="homey-icon homey-icon-close"></i> '+e.msg+"</p>")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})}),$("#homey_reset_password").length>0&&$("#homey_reset_password").on("click",function(e){e.preventDefault();var t=$(this),a=$('input[name="rp_login"]').val(),i=$('input[name="rp_key"]').val(),n=$('input[name="new_password"]').val(),o=$('input[name="homey_resetpassword_security"]').val();$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_reset_password_2",rq_login:a,password:n,rp_key:i,security:o},beforeSend:function(){t.children("i").remove(),t.prepend('<i class=" '+process_loader_spinner+'"></i>')},success:function(e){e.success?($("#password_reset_msgs, .homey_login_messages").empty().append('<p class="success text-success"><i class="homey-icon homey-icon-check-circle-1"></i> '+e.msg+"</p>"),$("#new_password").val(""),$("#modal-login").modal("show")):$("#password_reset_msgs").empty().append('<p class="error text-danger"><i class="homey-icon homey-icon-close"></i> '+e.msg+"</p>")},error:function(e){},complete:function(){t.children("i").removeClass(process_loader_spinner)}})}),$(".homey-facebook-login").on("click",function(){var e=$(this);homey_login_via_facebook(e)});var homey_login_via_facebook=function(current){var $form=current.parents("form"),$messages=$(".homey_login_messages");$.ajax({type:"POST",url:ajaxurl,data:{action:"homey_facebook_login_oauth"},beforeSend:function(){$messages.empty().append('<p class="success text-success"> '+login_sending+"</p>")},success:function(e){window.location.href=e},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})};$(".homey-yahoo-login").on("click",function(){var e=$(this);homey_login_via_yahoo(e)});var homey_login_via_yahoo=function(current){var $form=current.parents("form"),$messages=$(".homey_login_messages");$.ajax({type:"POST",url:ajaxurl,data:{action:"homey_yahoo_login"},beforeSend:function(){$messages.empty().append('<p class="success text-success"> '+login_sending+"</p>")},success:function(e){window.location.href=e},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})};$(".homey-google-login").on("click",function(){var e=$(this);homey_login_via_google(e)});var homey_login_via_google=function(current){var $form=current.parents("form"),$messages=$(".homey_login_messages");$.ajax({type:"POST",url:ajaxurl,data:{action:"homey_google_login_oauth"},beforeSend:function(){$messages.empty().append('<p class="success text-success"> '+login_sending+"</p>")},success:function(e){window.location.href=e},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})},homey_message_notifications=function(){$.ajax({url:ajaxurl,data:{action:"homey_chcek_messages_notifications"},method:"POST",dataType:"JSON",beforeSend:function(){},success:function(e){e.success&&(e.notification?($(".user-alert").show(),$(".msg-alert").show()):($(".user-alert").hide(),$(".msg-alert").hide()))}})},homey_booking_notification=function(){$.ajax({url:ajaxurl,data:{action:"homey_booking_notification"},method:"POST",dataType:"JSON",beforeSend:function(){},success:function(e){e.success&&(0!=e.notification?$(".new-booking-alert").show():$(".new-booking-alert").hide())}})};$(document).ready(function(){homey_message_notifications(),0!=parseInt(userID,10)&&setInterval(function(){homey_message_notifications()},6e4),homey_booking_notification(),0!=parseInt(userID,10)&&setInterval(function(){homey_booking_notification()},6e4)}),$(".btn_extra_expense").on("click",function(e){e.preventDefault(),$("#resrv_id").val()}),$(".homey-woocommerce-featured-pay").on("click",function(e){e.preventDefault();let t=$(this).data("listid"),a=$(this).data("featured");homey_processing_modal(processing_text),$.ajax({type:"POST",url:ajaxurl,data:{action:"homey_featured_woo_pay",listing_id:t,is_featured:a},success:function(e){if(!1!=e.success){var i=HOMEY_ajax_vars.woo_checkout_url+"?listing_id="+t+"&is_featured="+a;window.location.href=i}else $("#homey_modal").modal("hide")},error:function(e){}})}),$(".homey-woocommerce-featured-pay-exp").on("click",function(e){e.preventDefault();let t=$(this).data("experienceId"),a=$(this).data("featured");homey_processing_modal(processing_text),$.ajax({type:"POST",url:ajaxurl,data:{action:"homey_featured_woo_pay_exp",experience_id:t,is_featured:a},success:function(e){if(!1!=e.success){var i=HOMEY_ajax_vars.woo_checkout_url+"?experience_id="+t+"&is_featured="+a;window.location.href=i}else $("#homey_modal").modal("hide")},error:function(e){}})}),$(".homey-woo-reservation-pay").on("click",function(e){e.preventDefault();let t=$(this).data("reservation_id");homey_processing_modal(processing_text),$.ajax({type:"POST",url:ajaxurl,data:{action:"homey_reservation_woo_pay",reservation_id:t},success:function(e){if(!1!=e.success){var a=HOMEY_ajax_vars.woo_checkout_url+"?reservation_id="+t;window.location.href=a}else $("#homey_modal").modal("hide")},error:function(e){}})}),$(".homey-woo-exp-reservation-pay").on("click",function(e){e.preventDefault();let t=$(this).data("reservation_id");homey_processing_modal(processing_text),$.ajax({type:"POST",url:ajaxurl,data:{action:"homey_reservation_woo_exp_pay",reservation_id:t},success:function(e){if(!1!=e.success){var a=HOMEY_ajax_vars.woo_checkout_url+"?reservation_id="+t;window.location.href=a}else $("#homey_modal").modal("hide")},error:function(e){}})}),$("#make_woocommerce_instant_experience_payment").on("click",function(e){e.preventDefault(),homey_processing_modal(processing_text),$(this);var t,a=$("#check_in_date").val(),i=$("#guests").val(),n=$("#experience_id").val(),o=$("#renter_message").val();$("#checkout-security").val();var s="";void 0!==$("#reservation_no_userHash")&&(s=$("#reservation_no_userHash").val());var r=[];$(".homey_extra_price").each(function(){var e=$(this).data("name"),a=$(this).data("price"),i=$(this).data("type");t="",t=(t=(t=e)+"|"+a)+"|"+i,r.push(t)});var l="homey_instant_reservation_woo_exp_pay";void 0!==s&&s>0&&(l="hm_no_login_homey_instant_reservation_exp_woo_pay"),$.ajax({type:"POST",url:ajaxurl,data:{action:l,check_in:a,guests:i,extra_options:r,experience_id:n,renter_message:o,reservation_no_userHash:s},success:function(e){if(!1!=e.success){var t=HOMEY_ajax_vars.woo_checkout_url+"?check_in="+a+"&guests="+i+"&extra_options[]="+r+"&experience_id="+n+"&renter_message="+o;console.log(t),window.location.href=t}else $("#homey_modal").modal("hide")},error:function(e){}})}),$("#make_woocommerce_instant_booking_payment").on("click",function(e){e.preventDefault(),homey_processing_modal(processing_text),$(this);var t,a=$("#check_in_date").val(),i=$("#check_out_date").val(),n=$("#guests").val(),o=$("#adult_guest").val(),s=$("#child_guest").val(),r=$("#listing_id").val(),l=$("#renter_message").val();$("#checkout-security").val();var c="";void 0!==$("#reservation_no_userHash")&&(c=$("#reservation_no_userHash").val());var d=[];$(".homey_extra_price").each(function(){var e=$(this).data("name"),a=$(this).data("price"),i=$(this).data("type");t="",t=(t=(t=e)+"|"+a)+"|"+i,d.push(t)});var u="homey_instant_reservation_woo_pay";void 0!==c&&c>0&&(u="hm_no_login_homey_instant_reservation_woo_pay"),$.ajax({type:"POST",url:ajaxurl,data:{action:u,check_in:a,check_out:i,guests:n,adult_guest:o,child_guest:s,extra_options:d,listing_id:r,renter_message:l,reservation_no_userHash:c},success:function(e){if(!1!=e.success){var t=HOMEY_ajax_vars.woo_checkout_url+"?check_in="+a+"&check_out="+i+"&guests="+n+"&extra_options[]="+d+"&listing_id="+r+"&renter_message="+l;window.location.href=t}else $("#homey_modal").modal("hide")},error:function(e){}})}),$("#make_hourly_woocommerce_instant_booking_payment").on("click",function(e){e.preventDefault(),homey_processing_modal(processing_text);var temp_opt,$this=$(this),check_in=$("#check_in_date").val(),check_in_hour=$("#check_in_hour").val(),check_out_hour=$("#check_out_hour").val(),start_hour=$("#start_hour").val(),end_hour=$("#end_hour").val(),guests=$("#guests").val(),listing_id=$("#listing_id").val(),renter_message=$("#renter_message").val(),security=$("#checkout-security").val(),extra_options=[];$(".homey_extra_price").each(function(){var e=$(this).data("name"),t=$(this).data("price"),a=$(this).data("type");temp_opt="",temp_opt=(temp_opt=(temp_opt=e)+"|"+t)+"|"+a,extra_options.push(temp_opt)}),$("#instance_noti").empty();var reservation_no_userHash=$("#reservation_no_userHash").val(),action_name_for_wp_action="homey_instant_hourly_reservation_woo_pay";void 0!==reservation_no_userHash&&reservation_no_userHash>0&&(action_name_for_wp_action="hm_no_login_instant_hourly_reservation_woo_pay"),$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:action_name_for_wp_action,check_in:check_in,check_in_hour:check_in_hour,check_out_hour:check_out_hour,start_hour:start_hour,end_hour:end_hour,guests:guests,extra_options:extra_options,listing_id:listing_id,renter_message:renter_message,reservation_no_userHash:reservation_no_userHash,security:security},success:function(e){if(!1!=e.success){var t=HOMEY_ajax_vars.woo_checkout_url+"?start_hour="+start_hour+"&end_hour="+end_hour+"&check_in="+check_in+"&check_in_hour="+check_in_hour+"&check_out_hour="+check_out_hour+"&guests="+guests+"&extra_options[]="+extra_options+"&listing_id="+listing_id+"&renter_message="+renter_message;window.location.href=t}else $("#homey_modal").modal("hide")},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})}),$("#has_social_account").data("hasSocialAccount")>0&&($("#modal-login").modal("show"),$(".homey_login_messages").empty().append('<p class="error text-danger"><i class="homey-icon homey-icon-close"></i>'+already_login_text+"</p>"))}function save_booking_details(e,t,a,i,n,o,s){var r=$("input[name='_wp_http_referer']").val();if(void 0!==r){var l=r.split("?")[0]+"?arrive="+e+"&depart="+t+"&guest="+a+"&adult_guest="+n+"&child_guest="+o+"&guest_message="+i+"&new_reser_request_user_email="+s;$("input[name='_wp_http_referer']").val(l)}}function save_hourl_booking_details(e,t,a,i,n,o,s){var r=$("input[name='_wp_http_referer']").val();if(void 0!==r){var l=r.split("?")[0]+"?arrive="+e+"&start="+t+"&end="+a+"&guest="+i+"&adult_guest="+o+"&child_guest="+s+"&guest_message="+n;$("input[name='_wp_http_referer']").val(l)}}function save_exp_booking_details(e,t,a,i,n){var o=$("input[name='_wp_http_referer']").val();if(void 0!==o){var s=o.split("?")[0]+"?arrive="+e+"&guest="+t+"&adult_guest="+i+"&child_guest="+n+"&guest_message="+a;$("input[name='_wp_http_referer']").val(s)}}if(jQuery("body").hasClass("single-listing")){var temp_opt,extra_options=[];jQuery(".homey_extra_price input").each(function(){if(jQuery(this).is(":checked")){var e=jQuery(this).data("name"),t=jQuery(this).data("price"),a=jQuery(this).data("type");temp_opt="",temp_opt=(temp_opt=(temp_opt=e)+"|"+t)+"|"+a,extra_options.push(temp_opt)}});var check_in_date=jQuery('input[name="arrive"]').val();check_in_date=homey_convert_date(check_in_date);var start_hour=jQuery('select[name="start_hour"]').val(),end_hour=jQuery('select[name="end_hour"]').val(),guests=jQuery('input[name="guests"]').val(),listing_id=jQuery("#listing_id").val(),security=jQuery("#reservation-security").val();void 0!==start_hour&&void 0!==end_hour&&homey_calculate_hourly_booking_cost(check_in_date,start_hour,end_hour,guests,listing_id,security,extra_options)}jQuery("#place_order").click(function(){jQuery("html, body").animate({scrollTop:jQuery(".woocommerce-info").offset().top},"slow")}),jQuery(".approve_listing").click(function(){var listing_id=jQuery(this).data("approval-listing-id");jQuery(this).text("..."),$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_approve_listing",listing_id:listing_id},success:function(e){!1!=e.success&&window.location.reload()},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})}),jQuery(".approve_experience").click(function(){var experience_id=jQuery(this).data("approval-experience-id");jQuery(this).text("..."),$.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"homey_approve_experience",experience_id:experience_id},success:function(e){!1!=e.success&&window.location.reload()},error:function(xhr,status,error){var err=eval("("+xhr.responseText+")");console.log(err.Message)}})});var payment_gateway=$(".homey_check_gateway:checked").val();function select_payment_gateway(e){"stripe"==e?($("#without_stripe").hide(),$("#stripe_main_wrap").show(),$(".payment-buttons").css("display","none")):($("#without_stripe").show(),$("#stripe_main_wrap").hide(),$(".payment-buttons").css("display","block"))}$(".homey_check_gateway").on("click",function(){select_payment_gateway($(this).val())}),void 0!==payment_gateway&&select_payment_gateway(payment_gateway)});